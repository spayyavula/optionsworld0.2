import{j as e,a as L,P as E}from"./index-7228f007.js";import{r as m}from"./react-vendor-1447f830.js";import{C as P}from"./communityService-d0b004eb.js";import{A as R,Q as M,V as A,C as U,W as V}from"./ui-vendor-6492ecb9.js";const z=({symbol:c,width:j=350,height:u=220,timeframe:N="D",theme:i="light",container_id:S})=>{const l=m.useRef(null),v=m.useRef(null);m.useEffect(()=>{const f=()=>{l.current&&(l.current.innerHTML=""),v.current&&(v.current=null)};if(f(),!!l.current){try{const r=document.createElement("div");r.className="stockcharts-mini-chart",r.style.display="flex",r.style.flexDirection="column",r.style.alignItems="center",r.style.justifyContent="center",r.style.width="100%",r.style.height="100%",r.style.backgroundColor=i==="dark"?"#1a1a1a":"#f8f9fa",r.style.borderRadius="0.5rem",r.style.padding="1rem",r.style.textAlign="center";const b=(c.includes(":"),c),x="https://stockcharts.com/h-sc/ui",k=new URLSearchParams({s:b,p:N,b:i==="dark"?"dark":"light",g:"false",d:"false",t:"false"}),y=document.createElement("div");y.style.fontWeight="bold",y.style.fontSize="16px",y.style.marginBottom="0.5rem",y.style.color=i==="dark"?"#e0e0e0":"#111827",y.textContent=c;const n=document.createElement("div");n.style.width="100%",n.style.height="70%",n.style.backgroundColor=i==="dark"?"#2a2a2a":"#e9ecef",n.style.borderRadius="0.375rem",n.style.marginBottom="0.75rem",n.style.display="flex",n.style.alignItems="center",n.style.justifyContent="center";const w=document.createElement("div");w.innerHTML=`
        <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="${i==="dark"?"#e0e0e0":"#6c757d"}" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <line x1="12" y1="20" x2="12" y2="10"></line>
          <line x1="18" y1="20" x2="18" y2="4"></line>
          <line x1="6" y1="20" x2="6" y2="16"></line>
        </svg>
      `,n.appendChild(w);const a=document.createElement("a");a.href=`${x}?${k.toString()}`,a.target="_blank",a.rel="noopener noreferrer",a.style.display="inline-flex",a.style.alignItems="center",a.style.justifyContent="center",a.style.padding="0.5rem 0.75rem",a.style.backgroundColor="#2563eb",a.style.color="white",a.style.borderRadius="0.375rem",a.style.fontSize="0.875rem",a.style.fontWeight="500",a.style.textDecoration="none",a.style.transition="background-color 150ms",a.textContent="View Chart";const h=document.createElement("div");h.style.marginTop="0.5rem",h.style.fontSize="10px",h.style.color=i==="dark"?"#adb5bd":"#6c757d",h.textContent="Requires StockCharts account",a.onmouseover=()=>{a.style.backgroundColor="#1d4ed8"},a.onmouseout=()=>{a.style.backgroundColor="#2563eb"},r.appendChild(y),r.appendChild(n),r.appendChild(a),r.appendChild(h),l.current.appendChild(r)}catch(r){console.error("Error initializing StockCharts mini widget:",r),l.current&&(l.current.innerHTML='<div style="display: flex; align-items: center; justify-content: center; height: 100%; color: #888;">Failed to load chart</div>')}return f}},[c,j,u,N,i]);const d=S||`stockcharts-mini-${Math.random().toString(36).substring(2,11)}`;return e.jsx("div",{ref:l,id:d,className:"stockcharts-mini-chart-container",style:{width:typeof j=="number"?`${j}px`:j,height:typeof u=="number"?`${u}px`:u,borderRadius:"0.5rem",overflow:"hidden",boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06)"}})},q=z;function G(){var T;const{state:c,dispatch:j}=L(),[u,N]=m.useState([]),[i,S]=m.useState(null),[l,v]=m.useState("market"),[d,f]=m.useState("buy_to_open"),[r,b]=m.useState(""),[x,k]=m.useState(""),[y,n]=m.useState(!0);m.useEffect(()=>{w()},[]);const w=async()=>{try{n(!0);const s=E.getTopLiquidOptions();N(s)}catch(s){console.error("Failed to load options contracts:",s)}finally{n(!1)}},a=s=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(s),h=s=>`${s>=0?"+":""}${(s*100).toFixed(2)}%`,t=u.find(s=>s.ticker===i),o=c.positions.find(s=>s.contractTicker===i),$=()=>{if(!i||!r||parseInt(r)<=0)return;const s=u.find(_=>_.ticker===i);if(!s)return;const p=parseInt(r),g=l==="market"?s.last:parseFloat(x),C=p*g*100;if(d==="buy_to_open"){if(C>c.buyingPower){alert("Insufficient buying power");return}}else if(!o||o.quantity<p){alert("Insufficient contracts to sell");return}if(l!=="market"&&(!x||parseFloat(x)<=0)){alert("Please enter a valid limit price");return}j({type:"PLACE_OPTIONS_ORDER",payload:{contractTicker:i,underlyingTicker:s.underlying_ticker,type:d,orderType:l,quantity:p,price:l==="market"?void 0:parseFloat(x),status:"pending"}}),b(""),k(""),alert(`${d.replace("_"," ").toUpperCase()} order placed for ${p} contracts of ${i}`),P.hasConfiguredPlatforms()&&confirm("Would you like to share this trade with the community?")&&O(s,p,g,d)},O=async(s,p,g,C)=>{const _={symbol:s.underlying_ticker,action:C.includes("buy")?"buy":"sell",price:g,quantity:p,strategy:`${s.contract_type.toUpperCase()} ${s.strike_price} ${s.expiration_date}`,reasoning:`Options trade: ${C.replace("_"," ")} ${p} contracts of ${s.ticker} at $${g.toFixed(2)}`};try{await P.shareTradingAlert(_)}catch(I){console.error("Failed to share trade:",I)}},F=t&&r?parseInt(r)*(l==="market"?t.last:parseFloat(x)||0)*100:0;return y?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"text-lg text-gray-500",children:"Loading options contracts..."})}):e.jsxs("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-3",children:[e.jsx("div",{className:"lg:col-span-3",children:e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-4",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(R,{className:"h-5 w-5 text-yellow-600"})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("h3",{className:"text-sm font-medium text-yellow-800",children:"Important Risk Disclaimer"}),e.jsxs("div",{className:"mt-2 text-sm text-yellow-700",children:[e.jsx("p",{children:"Options trading involves substantial risk and is not suitable for all investors. The valuation of options may fluctuate, and as a result, you may lose more than your original investment."}),e.jsx("p",{className:"mt-1",children:"This platform is for educational purposes only. Past performance is not indicative of future results. Consider your investment objectives before trading."})]})]})]})})}),e.jsx("div",{className:"lg:col-span-2",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Top Liquid Options Contracts"}),e.jsx("div",{className:"text-sm text-gray-500",children:"Real-time options data"})]})}),e.jsx("div",{className:"card-body",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Contract"}),e.jsx("th",{children:"Underlying"}),e.jsx("th",{children:"Strike"}),e.jsx("th",{children:"Expiry"}),e.jsx("th",{children:"Bid/Ask"}),e.jsx("th",{children:"Last"}),e.jsx("th",{children:"IV"}),e.jsx("th",{children:"Delta"}),e.jsx("th",{children:"Volume"}),e.jsx("th",{children:"Action"})]})}),e.jsx("tbody",{children:u.map(s=>e.jsxs("tr",{className:i===s.ticker?"bg-blue-50":"",children:[e.jsx("td",{children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:s.ticker}),e.jsx("div",{className:"text-sm text-gray-500 capitalize",children:s.contract_type})]})}),e.jsx("td",{className:"font-medium",children:s.underlying_ticker}),e.jsx("td",{children:a(s.strike_price)}),e.jsx("td",{className:"text-sm text-gray-500",children:s.expiration_date}),e.jsx("td",{children:e.jsx("div",{className:"text-sm",children:e.jsxs("div",{children:[a(s.bid)," / ",a(s.ask)]})})}),e.jsx("td",{className:"font-medium",children:a(s.last)}),e.jsx("td",{children:h(s.implied_volatility)}),e.jsx("td",{className:s.delta>=0?"text-green-600":"text-red-600",children:s.delta.toFixed(3)}),e.jsxs("td",{className:"text-sm text-gray-500",children:[(s.volume/1e3).toFixed(1),"K"]}),e.jsx("td",{children:e.jsx("button",{onClick:()=>S(s.ticker),className:`btn ${i===s.ticker?"btn-primary":"btn-secondary"}`,children:i===s.ticker?"Selected":"Select"})})]},s.ticker))})]})})})]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Place Options Order"})}),e.jsx("div",{className:"card-body",children:i?e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:i}),e.jsxs("p",{className:"text-sm text-gray-500",children:[t==null?void 0:t.underlying_ticker," $",t==null?void 0:t.strike_price," ",(T=t==null?void 0:t.contract_type)==null?void 0:T.toUpperCase()]}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Exp: ",t==null?void 0:t.expiration_date]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-medium text-gray-900",children:a((t==null?void 0:t.last)||0)}),e.jsxs("p",{className:"text-sm text-gray-500",children:["IV: ",h((t==null?void 0:t.implied_volatility)||0)]})]})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Delta:"}),e.jsx("span",{className:"font-medium",children:t==null?void 0:t.delta.toFixed(3)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Gamma:"}),e.jsx("span",{className:"font-medium",children:t==null?void 0:t.gamma.toFixed(3)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Theta:"}),e.jsx("span",{className:"font-medium",children:t==null?void 0:t.theta.toFixed(3)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Vega:"}),e.jsx("span",{className:"font-medium",children:t==null?void 0:t.vega.toFixed(3)})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Trade Type"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{onClick:()=>f("buy_to_open"),className:`flex-1 btn ${d==="buy_to_open"?"btn-success":"btn-secondary"}`,children:[e.jsx(M,{className:"h-4 w-4"}),"Buy to Open"]}),e.jsxs("button",{onClick:()=>f("sell_to_close"),className:`flex-1 btn ${d==="sell_to_close"?"btn-danger":"btn-secondary"}`,disabled:!o,children:[e.jsx(A,{className:"h-4 w-4"}),"Sell to Close"]})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Order Type"}),e.jsxs("select",{className:"form-select",value:l,onChange:s=>v(s.target.value),children:[e.jsx("option",{value:"market",children:"Market Order"}),e.jsx("option",{value:"limit",children:"Limit Order"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Contracts"}),e.jsx("input",{type:"number",className:"form-input",placeholder:"Number of contracts",value:r,onChange:s=>b(s.target.value),min:"1"}),o&&d==="sell_to_close"&&e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Available: ",o.quantity," contracts"]})]}),l!=="market"&&e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Limit Price"}),e.jsx("input",{type:"number",className:"form-input",placeholder:"Price per contract",value:x,onChange:s=>k(s.target.value),step:"0.01",min:"0.01"})]}),r&&e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsxs("h4",{className:"font-medium text-gray-900 mb-2 flex items-center",children:[e.jsx(U,{className:"h-4 w-4 mr-2"}),"Order Summary"]}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Contracts:"}),e.jsx("span",{children:r})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Price per Contract:"}),e.jsx("span",{children:l==="market"?`${a((t==null?void 0:t.last)||0)} (Market)`:a(parseFloat(x)||0)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Multiplier:"}),e.jsx("span",{children:"100 shares"})]}),e.jsxs("div",{className:"flex justify-between font-medium",children:[e.jsxs("span",{children:["Total ",d==="buy_to_open"?"Cost":"Proceeds",":"]}),e.jsx("span",{children:a(F)})]})]})]}),e.jsxs("button",{onClick:$,disabled:!r||parseInt(r)<=0||l!=="market"&&!x,className:`w-full btn ${d==="buy_to_open"?"btn-success":"btn-danger"}`,children:["Place ",d.replace("_"," ").toUpperCase()," Order"]}),P.hasConfiguredPlatforms()&&e.jsxs("div",{className:"text-xs text-gray-500 text-center mt-2",children:[e.jsx(V,{className:"h-3 w-3 inline mr-1"}),"Share trades with community after placing orders"]})]}):e.jsx("p",{className:"text-gray-500 text-center py-4",children:"Select an options contract to start trading"})})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Account Info"})}),e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Buying Power:"}),e.jsx("span",{className:"font-medium",children:a(c.buyingPower)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Cash Balance:"}),e.jsx("span",{className:"font-medium",children:a(c.balance)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Total Value:"}),e.jsx("span",{className:"font-medium",children:a(c.totalValue)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Options Positions:"}),e.jsx("span",{className:"font-medium",children:c.positions.length})]})]})})]}),i&&o&&e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Current Position"})}),e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Contracts Owned:"}),e.jsx("span",{className:"font-medium",children:o.quantity})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Avg Price:"}),e.jsx("span",{className:"font-medium",children:a(o.avgPrice)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Market Value:"}),e.jsx("span",{className:"font-medium",children:a(o.totalValue)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Unrealized P&L:"}),e.jsxs("span",{className:`font-medium ${o.unrealizedPnL>=0?"text-green-600":"text-red-600"}`,children:[a(o.unrealizedPnL)," (",h(o.unrealizedPnLPercent/100),")"]})]})]})})]}),i&&t&&e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:[t.underlying_ticker," Chart"]})}),e.jsx("div",{className:"card-body",children:e.jsx(q,{symbol:t.underlying_ticker,width:"100%",height:300,theme:"light"})})]})]})]})}export{G as default};
