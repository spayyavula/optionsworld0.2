var Se=Object.defineProperty;var De=(l,t,a)=>t in l?Se(l,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):l[t]=a;var N=(l,t,a)=>(De(l,typeof t!="symbol"?t+"":t,a),a);import{r as u,a as Ae,u as ae,R as $,L as w,b as q,d as y,B as Pe}from"./react-vendor-1447f830.js";import{X as k,A as C,M as Te,B as re,a as ke,T as oe,b as ie,d as Ce,L as Ie,C as Oe,F as ne,E as Le,P as W,U as ce,S as G,e as le,Z as Me,G as Re,f as J,g as M,h as de,i as $e,j as Fe,I as Ve,k as Ue,l as Be,m as _,n as Ye,o as B,p as ze}from"./ui-vendor-6492ecb9.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function a(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(r){if(r.ep)return;r.ep=!0;const o=a(r);fetch(r.href,o)}})();const He="modulepreload",Ke=function(l){return"/"+l},Q={},g=function(t,a,s){if(!a||a.length===0)return t();const r=document.getElementsByTagName("link");return Promise.all(a.map(o=>{if(o=Ke(o),o in Q)return;Q[o]=!0;const i=o.endsWith(".css"),n=i?'[rel="stylesheet"]':"";if(!!s)for(let m=r.length-1;m>=0;m--){const p=r[m];if(p.href===o&&(!i||p.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${n}`))return;const d=document.createElement("link");if(d.rel=i?"stylesheet":He,i||(d.as="script",d.crossOrigin=""),d.href=o,document.head.appendChild(d),i)return new Promise((m,p)=>{d.addEventListener("load",m),d.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${o}`)))})})).then(()=>t()).catch(o=>{const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=o,window.dispatchEvent(i),!i.defaultPrevented)throw o})};var ue={exports:{}},F={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qe=u,We=Symbol.for("react.element"),Ge=Symbol.for("react.fragment"),Je=Object.prototype.hasOwnProperty,Qe=qe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Ze={key:!0,ref:!0,__self:!0,__source:!0};function me(l,t,a){var s,r={},o=null,i=null;a!==void 0&&(o=""+a),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(i=t.ref);for(s in t)Je.call(t,s)&&!Ze.hasOwnProperty(s)&&(r[s]=t[s]);if(l&&l.defaultProps)for(s in t=l.defaultProps,t)r[s]===void 0&&(r[s]=t[s]);return{$$typeof:We,type:l,key:o,ref:i,props:r,_owner:Qe.current}}F.Fragment=Ge;F.jsx=me;F.jsxs=me;ue.exports=F;var e=ue.exports,z={},Z=Ae;z.createRoot=Z.createRoot,z.hydrateRoot=Z.hydrateRoot;const Xe=({title:l="Options World - #1 Options Trading Simulator | Practice Risk-Free",description:t="Master options trading with our advanced paper trading platform. Practice with real market data, learn Greeks, and build confidence before risking real money. Free to start!",image:a="https://images.pexels.com/photos/6801648/pexels-photo-6801648.jpeg",type:s="website",url:r})=>{const o=ae();return r||`${o.pathname}`,$.useEffect(()=>{document.title=l},[l]),e.jsx(e.Fragment,{})},et=({className:l="",variant:t="banner",showCloseButton:a=!0,persistent:s=!1})=>{const[r,o]=u.useState(!0);u.useEffect(()=>{s||localStorage.getItem("disclaimerDismissed")&&o(!1)},[s]);const i=()=>{o(!1),s||localStorage.setItem("disclaimerDismissed","true")};return r?t==="modal"?e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:e.jsxs("div",{className:"flex items-center justify-center min-h-screen p-4",children:[e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 transition-opacity",onClick:a?i:void 0}),e.jsxs("div",{className:"relative bg-white rounded-lg max-w-md w-full p-6 shadow-xl",children:[a&&e.jsx("button",{onClick:i,className:"absolute top-2 right-2 text-gray-400 hover:text-gray-600",children:e.jsx(k,{className:"h-5 w-5"})}),e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(C,{className:"h-6 w-6 text-yellow-500"})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Risk Disclaimer"}),e.jsxs("div",{className:"mt-2 text-sm text-gray-500 space-y-2",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Options World is for educational purposes only."})," The information provided is not financial advice."]}),e.jsx("p",{children:"Options trading involves significant risk and is not suitable for all investors. You may lose all of your invested capital."}),e.jsx("p",{children:"Past performance is not indicative of future results. Always do your own research and consider seeking advice from a licensed financial advisor."})]}),a&&e.jsx("div",{className:"mt-4",children:e.jsx("button",{onClick:i,className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"I Understand"})})]})]})]})]})}):t==="footer"?e.jsx("div",{className:`bg-gray-800 text-white py-3 px-4 text-sm ${l}`,children:e.jsxs("div",{className:"container mx-auto flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(C,{className:"h-4 w-4 text-yellow-400 mr-2"}),e.jsxs("span",{children:[e.jsx("strong",{children:"Disclaimer:"})," Options World is for educational purposes only. Not financial advice. Trading involves risk."]})]}),a&&e.jsx("button",{onClick:i,className:"text-gray-400 hover:text-white",children:e.jsx(k,{className:"h-4 w-4"})})]})}):e.jsx("div",{className:`bg-yellow-50 border-t border-b border-yellow-200 py-3 ${l}`,children:e.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(C,{className:"h-5 w-5 text-yellow-600"})}),e.jsx("div",{className:"ml-3",children:e.jsxs("p",{className:"text-sm text-yellow-700",children:[e.jsx("strong",{children:"Disclaimer:"})," Options World is for educational purposes only. Not financial advice. Trading involves risk."]})})]}),a&&e.jsx("button",{onClick:i,className:"ml-auto flex-shrink-0 text-yellow-600 hover:text-yellow-800",children:e.jsx(k,{className:"h-5 w-5"})})]})})}):null},Y=[{name:"Dashboard",href:"/app",icon:re},{name:"Options Portfolio",href:"/app/portfolio",icon:ke},{name:"Options Trading",href:"/app/trading",icon:oe},{name:"Options Learning",href:"/app/learning",icon:ie},{name:"Trading Journal",href:"/app/journal",icon:Ce},{name:"Options Strategies",href:"/app/strategies",icon:Ie},{name:"Options Arbitrage",href:"/app/arbitrage",icon:Oe},{name:"Orders",href:"/app/orders",icon:ne},{name:"Options Chain",href:"/app/watchlist",icon:Le},{name:"Regime Analysis",href:"/app/regime",icon:W},{name:"Analytics",href:"/app/analytics",icon:W},{name:"Community",href:"/app/community",icon:ce},{name:"Data Manager",href:"/app/data-manager",icon:G},{name:"Agent API",href:"/agent",icon:le},{name:"Settings",href:"/app/settings",icon:G}];function X({children:l}){const t=ae(),[a,s]=$.useState(!1),r=u.useMemo(()=>Y.find(o=>o.href===t.pathname),[t.pathname]);return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsxs("div",{className:`fixed inset-0 z-50 lg:hidden ${a?"block":"hidden"}`,children:[e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75",onClick:()=>s(!1)}),e.jsxs("div",{className:"fixed inset-y-0 left-0 flex w-64 flex-col bg-white shadow-xl",children:[e.jsxs("div",{className:"flex h-16 items-center justify-between px-4",children:[e.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Paper Trading"}),e.jsx("button",{onClick:()=>s(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(k,{className:"h-6 w-6"})})]}),e.jsx("nav",{className:"flex-1 space-y-1 px-2 py-4",children:Y.map(o=>{const i=o.icon,n=t.pathname===o.href;return e.jsxs(w,{to:o.href,onClick:()=>s(!1),className:`group flex items-center px-2 py-2 text-sm font-medium rounded-md transition-colors ${n?"bg-blue-50 text-blue-700":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"}`,children:[e.jsx(i,{className:`mr-3 h-5 w-5 ${n?"text-blue-500":"text-gray-400"}`}),o.name]},o.name)})})]})]}),e.jsx("div",{className:"hidden lg:fixed lg:inset-y-0 lg:flex lg:w-64 lg:flex-col",children:e.jsxs("div",{className:"flex flex-col flex-grow bg-white border-r border-gray-200 shadow-sm",children:[e.jsx("div",{className:"flex h-16 items-center px-4",children:e.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Paper Trading"})}),e.jsx("nav",{className:"flex-1 space-y-1 px-2 py-4",children:Y.map(o=>{const i=o.icon,n=t.pathname===o.href;return e.jsxs(w,{to:o.href,className:`group flex items-center px-2 py-2 text-sm font-medium rounded-md transition-colors ${n?"bg-blue-50 text-blue-700":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"}`,children:[e.jsx(i,{className:`mr-3 h-5 w-5 ${n?"text-blue-500":"text-gray-400"}`}),o.name]},o.name)})})]})}),e.jsxs("div",{className:"lg:pl-64",children:[e.jsxs("div",{className:"sticky top-0 z-40 flex h-16 items-center gap-x-4 border-b border-gray-200 bg-white px-4 shadow-sm sm:gap-x-6 sm:px-6 lg:px-8",children:[e.jsx("button",{type:"button",className:"-m-2.5 p-2.5 text-gray-700 lg:hidden",onClick:()=>s(!0),children:e.jsx(Te,{className:"h-6 w-6"})}),e.jsxs("div",{className:"flex flex-1 gap-x-4 self-stretch lg:gap-x-6",children:[e.jsx("div",{className:"flex flex-1 items-center",children:e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:(r==null?void 0:r.name)||"Dashboard"})}),e.jsx("div",{className:"flex items-center gap-x-4 lg:gap-x-6",children:e.jsx("div",{className:"text-sm text-gray-500",children:"Paper Trading Mode"})})]})]}),e.jsx("main",{className:"py-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"mb-4 bg-yellow-50 border border-yellow-200 rounded-lg p-2 text-sm text-yellow-700 flex items-center",children:[e.jsx(C,{className:"h-4 w-4 text-yellow-600 mr-2 flex-shrink-0"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Disclaimer:"})," This platform is for educational purposes only. Options trading involves significant risk."]})]}),l]})})]})]})}class he{static getEnvVars(){return{API_KEY:{}.VITE_CONSTANT_CONTACT_API_KEY,ACCESS_TOKEN:{}.VITE_CONSTANT_CONTACT_ACCESS_TOKEN,LIST_ID:{}.VITE_CONSTANT_CONTACT_LIST_ID}}static async subscribeEmail(t,a,s){try{const{API_KEY:r,ACCESS_TOKEN:o,LIST_ID:i}=this.getEnvVars();if(!r||!o||!i)return console.warn("Constant Contact not configured, using mock subscription"),this.mockSubscription(t);const n={email_address:{address:t,permission_to_send:"implicit"},list_memberships:[i]};a&&(n.first_name=a),s&&(n.last_name=s);const c=await fetch(`${this.API_BASE_URL}/contacts`,{method:"POST",headers:{Authorization:`Bearer ${o}`,"Content-Type":"application/json","X-API-Key":r},body:JSON.stringify(n)});if(!c.ok){const m=await c.json().catch(()=>({}));if(c.status===409)return{success:!0,message:"Email already subscribed to our list!"};throw new Error(`Constant Contact API error: ${c.status} - ${m.message||"Unknown error"}`)}return{success:!0,message:"Successfully subscribed to our newsletter!",contactId:(await c.json()).contact_id}}catch(r){return console.error("Constant Contact subscription error:",r),{success:!1,message:"Failed to subscribe. Please try again later."}}}static async mockSubscription(t){await new Promise(s=>{try{window.setTimeout(s,1e3)}catch(r){console.error("Error in mock subscription delay:",r),s(void 0)}});const a=JSON.parse(localStorage.getItem("newsletter_subscribers")||"[]");return a.includes(t)?{success:!0,message:"Email already subscribed to our list!"}:(a.push(t),localStorage.setItem("newsletter_subscribers",JSON.stringify(a)),{success:!0,message:"Successfully subscribed to our newsletter! (Development Mode)",contactId:`mock_${Date.now()}`})}static async getSubscriptionStatus(t){var a;try{const{API_KEY:s,ACCESS_TOKEN:r}=this.getEnvVars();if(!s||!r)return{subscribed:JSON.parse(localStorage.getItem("newsletter_subscribers")||"[]").includes(t)};const o=await fetch(`${this.API_BASE_URL}/contacts?email=${encodeURIComponent(t)}`,{headers:{Authorization:`Bearer ${r}`,"X-API-Key":s}});if(!o.ok)throw new Error(`API error: ${o.status}`);const n=(a=(await o.json()).contacts)==null?void 0:a[0];return{subscribed:!!n,contactId:n==null?void 0:n.contact_id}}catch(s){return console.error("Error checking subscription status:",s),{subscribed:!1}}}static async unsubscribeEmail(t){try{const{API_KEY:a,ACCESS_TOKEN:s,LIST_ID:r}=this.getEnvVars();if(!a||!s){const c=JSON.parse(localStorage.getItem("newsletter_subscribers")||"[]").filter(d=>d!==t);return localStorage.setItem("newsletter_subscribers",JSON.stringify(c)),{success:!0,message:"Successfully unsubscribed! (Development Mode)"}}const o=await this.getSubscriptionStatus(t);if(!o.subscribed||!o.contactId)return{success:!0,message:"Email not found in our list."};const i=await fetch(`${this.API_BASE_URL}/contacts/${o.contactId}/list_memberships/${r}`,{method:"DELETE",headers:{Authorization:`Bearer ${s}`,"X-API-Key":a}});if(!i.ok)throw new Error(`API error: ${i.status}`);return{success:!0,message:"Successfully unsubscribed from our newsletter."}}catch(a){return console.error("Unsubscribe error:",a),{success:!1,message:"Failed to unsubscribe. Please try again later."}}}}N(he,"API_BASE_URL","https://api.cc.email/v3");class pe{static getEnvVars(){return{PUBLISHABLE_KEY:{}.VITE_STRIPE_PUBLISHABLE_KEY,MONTHLY_PRICE_ID:{}.VITE_STRIPE_MONTHLY_PRICE_ID,YEARLY_PRICE_ID:{}.VITE_STRIPE_YEARLY_PRICE_ID,COFFEE_PRICE_ID:{}.VITE_STRIPE_COFFEE_PRICE_ID}}static async initializeStripe(){const{PUBLISHABLE_KEY:t}=this.getEnvVars();if(!t)return console.warn("Stripe not configured"),null;try{const{loadStripe:a}=await g(()=>import("./stripe.esm-27d2b7fe.js"),[]);return await a(t)}catch(a){return console.error("Failed to load Stripe:",a),null}}static async redirectToCheckout(t,a,s){const{MONTHLY_PRICE_ID:r,YEARLY_PRICE_ID:o}=this.getEnvVars();try{const i=t==="monthly"?r:o;if(!i)throw new Error(`${t} price ID not configured`);const n=await this.initializeStripe();if(!n)throw new Error("Stripe not available");const c={priceId:i,successUrl:`${window.location.origin}/?subscription=success&plan=${t}`,cancelUrl:`${window.location.origin}/?subscription=cancelled`,metadata:{plan:t,source:"landing_page"}};a&&(c.customerEmail=a),s&&(c.couponCode=s);const d={lineItems:[{price:i,quantity:1}],mode:"subscription",successUrl:c.successUrl,cancelUrl:c.cancelUrl,customerEmail:c.customerEmail,allowPromotionCodes:!0,billingAddressCollection:"auto"},{error:m}=await n.redirectToCheckout(d);if(m)throw m}catch(i){throw console.error("Stripe checkout error:",i),new Error("Failed to redirect to checkout. Please try again.")}}static async createCheckoutSession(t,a,s){const{MONTHLY_PRICE_ID:r,YEARLY_PRICE_ID:o}=this.getEnvVars();try{const i=t==="monthly"?r:o;if(!i)throw new Error(`${t} price ID not configured`);const n=await fetch(`${this.API_BASE_URL}/create-checkout-session`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({priceId:i,couponCode:a,customerEmail:s,successUrl:`${window.location.origin}/?subscription=success&plan=${t}`,cancelUrl:`${window.location.origin}/?subscription=cancelled`,metadata:{plan:t,source:"landing_page"}})});if(!n.ok){const d=await n.json().catch(()=>({}));throw new Error(d.message||"Failed to create checkout session")}const{url:c}=await n.json();return{url:c}}catch(i){throw console.error("Checkout session error:",i),new Error("Failed to create checkout session")}}static async redirectToCoffeeCheckout(t){const{COFFEE_PRICE_ID:a}=this.getEnvVars();try{if(!a)throw new Error("Coffee price ID not configured");const s=await this.initializeStripe();if(!s)throw new Error("Stripe not available");const{error:r}=await s.redirectToCheckout({lineItems:[{price:a,quantity:1}],mode:"payment",successUrl:`${window.location.origin}/?coffee=success`,cancelUrl:`${window.location.origin}/?coffee=cancelled`,customerEmail:t,billingAddressCollection:"auto"});if(r)throw r}catch(s){throw console.error("Coffee checkout error:",s),new Error("Failed to process payment. Please try again.")}}static async createCustomerPortalSession(t){try{const a=await fetch(`${this.API_BASE_URL}/create-portal-session`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({customer_id:t,return_url:`${window.location.origin}/app/settings`})});if(!a.ok)throw new Error("Failed to create portal session");const{url:s}=await a.json();return s}catch(a){throw console.error("Portal session error:",a),new Error("Failed to access customer portal")}}static getProducts(){return[{id:"free",name:"Free Starter",description:"Basic options trading with 5 top liquid contracts",price:0,currency:"USD",type:"subscription"},{id:"monthly",name:"Pro Monthly",description:"Full access with advanced analytics and strategy backtesting",price:29,currency:"USD",interval:"month",type:"subscription"},{id:"yearly",name:"Pro Yearly",description:"Everything in Pro Monthly plus 1-on-1 coaching and exclusive webinars",price:290,currency:"USD",interval:"year",type:"subscription"},{id:"coffee",name:"Buy Me a Coffee",description:"Support our development with a one-time contribution",price:5,currency:"USD",type:"one_time"}]}static mockStripeCheckout(t,a){const r=this.getProducts().find(c=>c.id===t);let o=(r==null?void 0:r.price)||0,i="",n=o;a?g(()=>Promise.resolve().then(()=>ee),void 0).then(({CouponService:c})=>{const d=c.validateCoupon(a,t,o,!0);d.isValid?(n=d.finalAmount,i=`
Coupon Applied: ${a}
Discount: $${d.discountAmount.toFixed(2)}`,confirm(`Mock Stripe Checkout

Plan: ${r==null?void 0:r.name}
Original Price: $${o}/${r==null?void 0:r.interval}${i}
Final Price: $${n}/${r==null?void 0:r.interval}

Proceed with mock subscription?`)&&this.completeMockCheckout(t,a,n)):alert("Invalid coupon code: "+d.error)}):confirm(`Mock Stripe Checkout

Plan: ${r==null?void 0:r.name}
Price: $${o}/${r==null?void 0:r.interval}

Proceed with mock subscription?`)&&this.completeMockCheckout(t,a,n)}static completeMockCheckout(t,a,s){const r={id:`sub_mock_${Date.now().toString()}`,plan:t,status:"active",created:new Date().toISOString(),current_period_end:new Date(Date.now()+(t==="yearly"?365:30)*24*60*60*1e3).toISOString(),coupon_applied:a||null,amount_paid:s||(t==="monthly"?29:290)};localStorage.setItem("mock_subscription",JSON.stringify(r)),a&&g(()=>Promise.resolve().then(()=>ee),void 0).then(({CouponService:o})=>{o.applyCoupon(a)}),window.location.href=`/?subscription=success&plan=${t}`}static mockCoffeeCheckout(){if(confirm(`Mock Buy Me a Coffee

Amount: $5

Proceed with mock payment?`)){const t={id:`pi_mock_${Date.now().toString()}`,amount:500,status:"succeeded",created:new Date().toISOString()};localStorage.setItem("mock_coffee_payment",JSON.stringify(t)),window.location.href="/?coffee=success"}}static getSubscriptionStatus(){try{const t=localStorage.getItem("supabase.auth.token")}catch(t){console.error("Error checking real subscription status:",t)}try{const t=localStorage.getItem("mock_subscription");if(t){const a=JSON.parse(t);return{active:a.status==="active"&&new Date(a.current_period_end)>new Date,plan:a.plan,subscription:a}}return{active:!1}}catch(t){return console.error("Error checking subscription status:",t),{active:!1}}}static verifyWebhookSignature(t,a,s){return!0}static handleWebhookEvent(t){console.log("Webhook event received:",t.type)}}N(pe,"API_BASE_URL","/api/stripe");class tt{static getEnvVars(){return{USERNAME:{}.VITE_BUY_ME_COFFEE_USERNAME,WIDGET_ID:{}.VITE_BUY_ME_COFFEE_WIDGET_ID}}static openBuyMeCoffeePage(t){const{USERNAME:a}=this.getEnvVars();if(typeof window>"u"){console.warn("Buy Me a Coffee service called in non-browser environment");return}if(!a){if(console.warn("Buy Me a Coffee username not configured, using mock payment"),typeof confirm<"u"&&confirm(`Mock Buy Me a Coffee

Amount: $5

Proceed with mock payment?`)){const o={id:`coffee_mock_${Date.now()}`,amount:5,currency:"USD",status:"completed",created:new Date().toISOString(),message:"Thanks for the coffee! ☕"};localStorage.setItem("mock_coffee_payments",JSON.stringify([...this.getCoffeePayments(),o])),typeof alert<"u"&&alert("Thank you for the coffee! ☕ (Development Mode)"),window.location.href="/"}return}const s=`https://www.buymeacoffee.com/${a}`,r=t?`${s}?message=${encodeURIComponent(t)}`:s;window.open(r,"_blank","noopener,noreferrer")}static createWidget(t={}){const{USERNAME:a}=this.getEnvVars();if(!a)return console.warn("Buy Me a Coffee not configured"),null;const{username:s=a,theme:r="default",message:o="Support our work!"}=t,i=document.createElement("div");return i.innerHTML=`
      <div style="
        display: inline-flex;
        align-items: center;
        gap: 8px;
        padding: 12px 24px;
        background: #FFDD00;
        color: #000;
        border-radius: 8px;
        text-decoration: none;
        font-weight: 600;
        font-size: 14px;
        cursor: pointer;
        transition: all 0.2s ease;
        border: none;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      " 
      onmouseover="this.style.transform='translateY(-1px)'; this.style.boxShadow='0 4px 8px rgba(0,0,0,0.15)'"
      onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 2px 4px rgba(0,0,0,0.1)'"
      onclick="window.open('https://www.buymeacoffee.com/${s}', '_blank')"
      >
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M7 14c-1.66 0-3-1.34-3-3V9c0-1.66 1.34-3 3-3h10c1.66 0 3 1.34 3 3v2c0 1.66-1.34 3-3 3H7z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          <path d="M7 14v5a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2v-5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          <path d="M4 6h16" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        ${o}
      </div>
    `,i.firstElementChild}static async loadWidget(t,a={}){const{USERNAME:s,WIDGET_ID:r}=this.getEnvVars();if(typeof window>"u"||typeof document>"u"){console.warn("Buy Me a Coffee widget called in non-browser environment");return}if(!s||!r){console.warn("Buy Me a Coffee widget not fully configured");return}try{const o=document.createElement("script");o.setAttribute("data-name","BMC-Widget"),o.setAttribute("data-cfasync","false"),o.src="https://cdnjs.buymeacoffee.com/1.0.0/widget.prod.min.js",o.setAttribute("data-id",s),o.setAttribute("data-description",a.message||"Support our work!"),o.setAttribute("data-message",a.message||"Thanks for your support!"),o.setAttribute("data-color","#FFDD00"),o.setAttribute("data-position","Right"),o.setAttribute("data-x_margin","18"),o.setAttribute("data-y_margin","18"),document.head.appendChild(o),console.log("Buy Me a Coffee widget loaded")}catch(o){console.error("Failed to load Buy Me a Coffee widget:",o)}}static mockCoffeePayment(){if(typeof window>"u"||typeof confirm>"u"){console.warn("Mock coffee payment called in non-browser environment");return}if(confirm(`Mock Buy Me a Coffee

Amount: $5

Proceed with mock payment?`)){const t={id:`coffee_mock_${Date.now()}`,amount:5,currency:"USD",status:"completed",created:new Date().toISOString(),message:"Thanks for the coffee! ☕"};localStorage.setItem("mock_coffee_payments",JSON.stringify([...this.getCoffeePayments(),t])),typeof alert<"u"&&alert("Thank you for the coffee! ☕ (Development Mode)"),window.location.href="/"}}static getCoffeePayments(){if(typeof localStorage>"u")return[];try{return JSON.parse(localStorage.getItem("mock_coffee_payments")||"[]")}catch(t){return console.error("Error getting coffee payments:",t),[]}}static createCoffeeButton(t="Buy me a coffee",a){if(typeof document>"u")throw console.warn("Coffee button creation called in non-browser environment"),new Error("Document not available in non-browser environment");const s=document.createElement("button");return s.innerHTML=`
      <svg width="20" height="20" viewBox="0 0 24 24" fill="none" style="margin-right: 8px;">
        <path d="M7 14c-1.66 0-3-1.34-3-3V9c0-1.66 1.34-3 3-3h10c1.66 0 3 1.34 3 3v2c0 1.66-1.34 3-3 3H7z" stroke="currentColor" stroke-width="2"/>
        <path d="M7 14v5a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2v-5" stroke="currentColor" stroke-width="2"/>
        <path d="M4 6h16" stroke="currentColor" stroke-width="2"/>
      </svg>
      ${t}
    `,s.style.cssText=`
      display: inline-flex;
      align-items: center;
      padding: 12px 24px;
      background: #FFDD00;
      color: #000;
      border: none;
      border-radius: 8px;
      font-weight: 600;
      font-size: 14px;
      cursor: pointer;
      transition: all 0.2s ease;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    `,s.addEventListener("mouseenter",()=>{s.style.transform="translateY(-1px)",s.style.boxShadow="0 4px 8px rgba(0,0,0,0.15)"}),s.addEventListener("mouseleave",()=>{s.style.transform="translateY(0)",s.style.boxShadow="0 2px 4px rgba(0,0,0,0.1)"}),s.addEventListener("click",()=>{a?a():this.openBuyMeCoffeePage()}),s}static isConfigured(){const{USERNAME:t}=this.getEnvVars();return!!t}static getConfigStatus(){const{USERNAME:t,WIDGET_ID:a}=this.getEnvVars();return{configured:this.isConfigured(),hasUsername:!!t,hasWidgetId:!!a}}}class S{static getCoupons(){try{const t=localStorage.getItem(this.STORAGE_KEY);return t?JSON.parse(t).map(s=>({...s,validFrom:new Date(s.validFrom),validUntil:new Date(s.validUntil),createdAt:new Date(s.createdAt)})):this.getDefaultCoupons()}catch(t){return console.error("Error loading coupons:",t),this.getDefaultCoupons()}}static getActiveDeals(){try{const t=localStorage.getItem(this.DEALS_KEY);return t?JSON.parse(t).map(s=>({...s,validFrom:new Date(s.validFrom),validUntil:new Date(s.validUntil)})).filter(s=>s.isActive&&new Date<=s.validUntil):this.getDefaultDeals()}catch(t){return console.error("Error loading deals:",t),this.getDefaultDeals()}}static validateCoupon(t,a,s,r=!1){const i=this.getCoupons().find(m=>m.code.toLowerCase()===t.toLowerCase()&&m.isActive);if(!i)return{isValid:!1,discountAmount:0,finalAmount:s,error:"Invalid coupon code"};const n=new Date;if(n<i.validFrom||n>i.validUntil)return{isValid:!1,discountAmount:0,finalAmount:s,error:"Coupon has expired"};if(i.applicablePlans.length>0&&!i.applicablePlans.includes(a))return{isValid:!1,discountAmount:0,finalAmount:s,error:`Coupon not valid for ${a} plan`};if(i.isFirstTimeOnly&&!r)return{isValid:!1,discountAmount:0,finalAmount:s,error:"Coupon is only valid for first-time subscribers"};if(i.minAmount&&s<i.minAmount)return{isValid:!1,discountAmount:0,finalAmount:s,error:`Minimum order amount is $${i.minAmount}`};if(i.usageLimit&&i.usedCount>=i.usageLimit)return{isValid:!1,discountAmount:0,finalAmount:s,error:"Coupon usage limit reached"};let c=0;i.type==="percentage"?(c=s*(i.value/100),i.maxDiscount&&(c=Math.min(c,i.maxDiscount))):c=i.value,c=Math.min(c,s);const d=Math.max(0,s-c);return{isValid:!0,coupon:i,discountAmount:c,finalAmount:d}}static applyCoupon(t){const a=this.getCoupons(),s=a.findIndex(r=>r.code.toLowerCase()===t.toLowerCase());s!==-1&&(a[s].usedCount+=1,localStorage.setItem(this.STORAGE_KEY,JSON.stringify(a)))}static createCoupon(t){const a=this.getCoupons(),s={...t,id:`coupon_${Date.now()}`,usedCount:0,createdAt:new Date};return a.push(s),localStorage.setItem(this.STORAGE_KEY,JSON.stringify(a)),s}static getCouponByCode(t){return this.getCoupons().find(s=>s.code.toLowerCase()===t.toLowerCase())||null}static getFeaturedDeal(){return this.getActiveDeals().find(a=>a.isFeatured)||null}static hasActiveDeals(){return this.getActiveDeals().length>0}static getDealByPlan(t){return this.getActiveDeals().find(s=>s.plan===t)||null}static formatDiscount(t){return t.type==="percentage"?`${t.value}% OFF`:`$${t.value} OFF`}static getDefaultCoupons(){const t=new Date,a=new Date(t.getTime()+30*24*60*60*1e3),s=new Date(t.getTime()+7*24*60*60*1e3);return[{id:"welcome50",code:"WELCOME50",name:"Welcome Discount",description:"50% off your first month",type:"percentage",value:50,validFrom:t,validUntil:a,usageLimit:1e3,usedCount:245,isActive:!0,applicablePlans:["monthly"],isFirstTimeOnly:!0,createdAt:t},{id:"blackfriday",code:"BLACKFRIDAY",name:"Black Friday Special",description:"70% off yearly subscription",type:"percentage",value:70,validFrom:t,validUntil:s,usageLimit:500,usedCount:123,isActive:!0,applicablePlans:["yearly"],isFirstTimeOnly:!1,createdAt:t},{id:"save20",code:"SAVE20",name:"Save $20",description:"$20 off any plan",type:"fixed_amount",value:20,minAmount:50,validFrom:t,validUntil:a,usageLimit:200,usedCount:67,isActive:!0,applicablePlans:[],isFirstTimeOnly:!1,createdAt:t},{id:"student",code:"STUDENT",name:"Student Discount",description:"30% off for students",type:"percentage",value:30,maxDiscount:50,validFrom:t,validUntil:a,isActive:!0,applicablePlans:[],isFirstTimeOnly:!1,usedCount:89,createdAt:t}]}static getDefaultDeals(){const t=new Date,a=new Date(t.getTime()+7*24*60*60*1e3),s=new Date(t.getTime()+30*24*60*60*1e3);return[{id:"blackfriday_monthly",name:"Black Friday - Monthly",description:"Limited time: 50% off your first 3 months",couponCode:"BLACKFRIDAY50",originalPrice:29,discountedPrice:14.5,discountPercentage:50,validFrom:t,validUntil:a,isActive:!0,isFeatured:!0,plan:"monthly"},{id:"blackfriday_yearly",name:"Black Friday - Yearly",description:"Massive savings: 70% off yearly subscription",couponCode:"BLACKFRIDAY70",originalPrice:290,discountedPrice:87,discountPercentage:70,validFrom:t,validUntil:a,isActive:!0,isFeatured:!1,plan:"yearly"},{id:"welcome_deal",name:"Welcome Deal",description:"New user special: 40% off first month",couponCode:"WELCOME40",originalPrice:29,discountedPrice:17.4,discountPercentage:40,validFrom:t,validUntil:s,isActive:!0,isFeatured:!1,plan:"monthly"}]}static initializeDefaultData(){localStorage.getItem(this.STORAGE_KEY)||localStorage.setItem(this.STORAGE_KEY,JSON.stringify(this.getDefaultCoupons())),localStorage.getItem(this.DEALS_KEY)||localStorage.setItem(this.DEALS_KEY,JSON.stringify(this.getDefaultDeals()))}static clearData(){localStorage.removeItem(this.STORAGE_KEY),localStorage.removeItem(this.DEALS_KEY)}}N(S,"STORAGE_KEY","coupons_data"),N(S,"DEALS_KEY","active_deals");const ee=Object.freeze(Object.defineProperty({__proto__:null,CouponService:S},Symbol.toStringTag,{value:"Module"}));function st({onSelectDeal:l,onClaimDeal:t,selectedPlan:a,className:s=""}){const r=S.getActiveDeals(),o=S.getFeaturedDeal();if(r.length===0)return null;const i=n=>{const c=new Date,d=n.getTime()-c.getTime(),m=Math.floor(d/(1e3*60*60*24)),p=Math.floor(d%(1e3*60*60*24)/(1e3*60*60));return m>0?`${m}d ${p}h left`:p>0?`${p}h left`:"Ending soon!"};return e.jsxs("div",{className:s,children:[o&&e.jsxs("div",{className:"mb-6 p-6 bg-gradient-to-r from-red-500 to-pink-600 rounded-xl text-white relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-2 right-2",children:e.jsx(Me,{className:"h-6 w-6 text-yellow-300"})}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(Re,{className:"h-5 w-5"}),e.jsx("span",{className:"text-sm font-semibold uppercase tracking-wide",children:"Featured Deal"})]}),e.jsx("h3",{className:"text-2xl font-bold mb-2",children:o.name}),e.jsx("p",{className:"text-red-100 mb-4",children:o.description}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"text-3xl font-bold",children:["$",o.discountedPrice,e.jsxs("span",{className:"text-lg line-through text-red-200 ml-2",children:["$",o.originalPrice]})]}),e.jsxs("div",{className:"bg-yellow-400 text-red-800 px-3 py-1 rounded-full text-sm font-bold",children:[o.discountPercentage,"% OFF"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"flex items-center space-x-1 text-red-100",children:[e.jsx(J,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm",children:i(o.validUntil)})]}),e.jsx("button",{onClick:()=>t==null?void 0:t(o),className:"mt-2 bg-white text-red-600 px-6 py-2 rounded-lg font-semibold hover:bg-red-50 transition-colors",children:"Claim Deal"})]})]})]}),e.jsx("div",{className:"absolute -bottom-4 -right-4 w-24 h-24 bg-white opacity-10 rounded-full"}),e.jsx("div",{className:"absolute -top-4 -left-4 w-16 h-16 bg-white opacity-10 rounded-full"})]}),e.jsx("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:r.filter(n=>!n.isFeatured).map(n=>e.jsxs("div",{className:`p-4 border-2 rounded-lg transition-all cursor-pointer ${a===n.plan?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>t==null?void 0:t(n),children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:n.name}),e.jsx("p",{className:"text-sm text-gray-600",children:n.description})]}),e.jsxs("div",{className:"bg-green-100 text-green-800 px-2 py-1 rounded text-xs font-medium",children:[n.discountPercentage,"% OFF"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-xl font-bold text-gray-900",children:["$",n.discountedPrice]}),e.jsxs("span",{className:"text-sm line-through text-gray-500",children:["$",n.originalPrice]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"flex items-center space-x-1 text-gray-500",children:[e.jsx(J,{className:"h-3 w-3"}),e.jsx("span",{className:"text-xs",children:i(n.validUntil)})]}),e.jsxs("div",{className:"flex items-center space-x-1 text-blue-600 mt-1",children:[e.jsx(M,{className:"h-3 w-3"}),e.jsx("span",{className:"text-xs font-medium",children:n.couponCode})]})]})]})]},n.id))}),e.jsx("div",{className:"mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(M,{className:"h-4 w-4 text-yellow-600 mt-0.5"}),e.jsxs("div",{className:"text-sm text-yellow-800",children:[e.jsx("p",{className:"font-medium",children:"Limited Time Offers"}),e.jsx("p",{children:"These deals are automatically applied at checkout. No additional coupon code needed!"})]})]})})]})}function at({plan:l,originalAmount:t,onCouponApplied:a,onCouponRemoved:s,appliedCoupon:r,className:o=""}){const[i,n]=u.useState(""),[c,d]=u.useState(!1),[m,p]=u.useState(""),h=async()=>{if(!i.trim())return;if(d(!0),p(""),!i.trim()){p("Please enter a coupon code"),d(!1);return}await new Promise(A=>setTimeout(A,500));const b=S.validateCoupon(i.trim(),l,t,!0);b.isValid?(a(b),n("")):p(b.error||"Invalid coupon code"),d(!1)},x=()=>{s(),p("")},v=b=>{b.key==="Enter"&&h()};return r?e.jsxs("div",{className:`flex items-center justify-between p-3 bg-green-50 border border-green-200 rounded-lg ${o}`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(de,{className:"h-4 w-4 text-green-600"}),e.jsxs("div",{children:[e.jsxs("span",{className:"text-sm font-medium text-green-800",children:[r.coupon.code," Applied"]}),e.jsxs("p",{className:"text-xs text-green-600",children:[S.formatDiscount(r.coupon)," - ",r.coupon.description]})]})]}),e.jsx("button",{onClick:x,className:"text-green-600 hover:text-green-800 transition-colors",children:e.jsx(k,{className:"h-4 w-4"})})]}):e.jsxs("div",{className:o,children:[e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(M,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Enter coupon code",value:i,onChange:b=>n(b.target.value.toUpperCase()),onKeyPress:v,className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm",disabled:c})]}),e.jsx("button",{onClick:h,disabled:!i.trim()||c,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors text-sm font-medium",children:c?e.jsx($e,{className:"h-4 w-4 animate-spin"}):"Apply"})]}),m&&e.jsxs("div",{className:"mt-2 flex items-center space-x-1 text-red-600",children:[e.jsx(k,{className:"h-3 w-3"}),e.jsx("span",{className:"text-xs",children:m})]})]})}const rt=({onAccept:l,onDecline:t,className:a=""})=>{const[s,r]=u.useState(!1);return e.jsx("div",{className:`bg-gray-50 border border-gray-200 rounded-lg p-4 ${a}`,children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"flex-shrink-0 pt-1",children:e.jsx(ne,{className:"h-5 w-5 text-blue-500"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-base font-medium text-gray-900",children:"Terms and Conditions"}),e.jsxs("div",{className:"mt-2 text-sm text-gray-600 space-y-2",children:[e.jsxs("p",{children:["By subscribing to OptionsWorld, you agree to our ",e.jsx("a",{href:"#",className:"text-blue-600 hover:underline",children:"Terms of Service"})," and ",e.jsx("a",{href:"#",className:"text-blue-600 hover:underline",children:"Privacy Policy"}),". You acknowledge that:"]}),e.jsxs("ul",{className:"list-decimal pl-4 space-y-1",children:[e.jsx("li",{children:"OptionsWorld is for educational purposes only and does not provide financial advice."}),e.jsx("li",{children:"Options trading involves substantial risk and may not be suitable for all investors."}),e.jsx("li",{children:"Past performance is not indicative of future results."}),e.jsx("li",{children:"You are responsible for your own trading decisions and potential losses."}),e.jsx("li",{children:"Data provided may not be accurate or timely and should be verified independently."}),e.jsx("li",{children:"Your subscription will automatically renew unless cancelled before the renewal date."}),e.jsx("li",{children:"You must be at least 18 years old to use this service."}),e.jsx("li",{children:"OptionsWorld reserves the right to modify or terminate the service at any time."}),e.jsx("li",{children:"Your personal information will be handled in accordance with our Privacy Policy."}),e.jsx("li",{children:"You agree not to reproduce, duplicate, copy, sell, or resell any portion of the service."})]}),e.jsx("div",{className:"mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(C,{className:"h-4 w-4 text-yellow-600 mt-0.5 mr-2 flex-shrink-0"}),e.jsxs("p",{className:"text-xs text-yellow-700",children:[e.jsx("strong",{children:"Risk Warning:"})," Options trading carries a high level of risk and may not be suitable for all investors. You should carefully consider your investment objectives, level of experience, and risk appetite before trading options. You may sustain a loss of some or all of your invested capital, therefore, you should not speculate with capital that you cannot afford to lose."]})]})})]}),e.jsxs("div",{className:"mt-4 flex items-start",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("input",{id:"terms-agreement",name:"terms-agreement",type:"checkbox",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded",checked:s,onChange:o=>r(o.target.checked)})}),e.jsxs("label",{htmlFor:"terms-agreement",className:"ml-3 text-sm text-gray-700",children:["I have read and agree to the ",e.jsx("a",{href:"#",className:"text-blue-600 hover:underline",children:"Terms of Service"})," and ",e.jsx("a",{href:"#",className:"text-blue-600 hover:underline",children:"Privacy Policy"})]})]}),e.jsxs("div",{className:"mt-4 flex space-x-3",children:[e.jsxs("button",{type:"button",onClick:l,disabled:!s,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(de,{className:"h-4 w-4 mr-1"}),"I Accept"]}),t&&e.jsx("button",{type:"button",onClick:t,className:"inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md shadow-sm text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"I Decline"})]})]})]})})};function ot(){const[l,t]=u.useState(""),[a,s]=u.useState(!1),[r,o]=u.useState(!1),[i,n]=u.useState(null),[c,d]=u.useState(null),[m,p]=u.useState(!1),[h,x]=u.useState(!1),[v,b]=u.useState(!1),[A,V]=u.useState(null);$.useEffect(()=>{S.initializeDefaultData(),p(S.hasActiveDeals()),new URLSearchParams(window.location.search).get("subscription")==="success"&&(x(!0),window.history.replaceState({},document.title,window.location.pathname))},[]);const I=async f=>{var E;V({plan:f,couponCode:(i==null?void 0:i.couponCode)||((E=c==null?void 0:c.coupon)==null?void 0:E.code)}),b(!0)},we=async()=>{if(A)try{const{plan:f,couponCode:E}=A,{url:Ee}=await pe.createCheckoutSession(f,E);window.location.href=Ee}catch(f){console.error("Failed to create checkout session:",f)}finally{b(!1),V(null)}},K=()=>{b(!1),V(null)},be=async f=>{f.preventDefault(),o(!0);try{await he.subscribeEmail(l),s(!0)}catch(E){console.error("Failed to subscribe:",E)}finally{o(!1)}},U=async f=>{try{await tt.openBuyMeCoffeePage()}catch(E){console.error("Failed to create donation:",E)}},_e=f=>{n(f),d(null)},ve=async f=>{try{await I(f.plan)}catch(E){console.error("Failed to claim deal:",E),alert("Failed to process deal. Please try again.")}},je=f=>{d(f),n(null)},Ne=()=>{d(null)},j=f=>i&&i.plan===f?{hasDiscount:i.discountPercentage>0,discountText:`${i.discountPercentage}% OFF`,savings:i.originalPrice-i.discountedPrice}:c&&c.isValid&&typeof c.discountAmount=="number"&&c.discountAmount>0?{hasDiscount:!0,discountText:S.formatDiscount(c.coupon),savings:c.discountAmount}:{hasDiscount:!1};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-blue-900 to-indigo-900",children:[e.jsxs("header",{className:"relative overflow-hidden",id:"home",children:[e.jsx("div",{className:"absolute inset-0 bg-black opacity-50"}),e.jsxs("div",{className:"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-24",children:[h&&e.jsxs("div",{className:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative mb-6",role:"alert",children:[e.jsx("strong",{className:"font-bold",children:"Success! "}),e.jsx("span",{className:"block sm:inline",children:"Thank you for subscribing to Options World! Your account has been activated."})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-5xl md:text-7xl font-bold text-white mb-6",children:"Master Options Trading"}),e.jsx("p",{className:"text-xl md:text-2xl text-gray-300 mb-8 max-w-3xl mx-auto",children:"Advanced analytics, real-time data, and AI-powered insights to maximize your options trading profits"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[e.jsxs(w,{to:"/app",className:"bg-blue-600 hover:bg-blue-700 text-white px-8 py-4 rounded-lg text-lg font-semibold transition-colors flex items-center justify-center",children:[e.jsx(Fe,{className:"mr-2 h-5 w-5"}),"Start Trading Now"]}),e.jsxs(w,{to:"/demo",className:"border border-white text-white hover:bg-white hover:text-gray-900 px-8 py-4 rounded-lg text-lg font-semibold transition-colors flex items-center justify-center",children:[e.jsx(Ve,{className:"mr-2 h-5 w-5"}),"View Demo"]})]})]})]})]}),e.jsx("section",{className:"py-20 bg-gray-900",id:"features",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-16",children:[e.jsx("h2",{className:"text-4xl font-bold text-white mb-4",children:"Everything You Need to Succeed"}),e.jsx("p",{className:"text-xl text-gray-400 max-w-2xl mx-auto",children:"Professional-grade tools and insights that give you the edge in options trading"})]}),e.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"bg-gray-800 p-8 rounded-xl hover:bg-gray-750 transition-colors",children:[e.jsx(oe,{className:"h-12 w-12 text-blue-500 mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-white mb-3",children:"Real-Time Analytics"}),e.jsx("p",{className:"text-gray-400",children:"Advanced charting and technical analysis tools with real-time market data"})]}),e.jsxs("div",{className:"bg-gray-800 p-8 rounded-xl hover:bg-gray-750 transition-colors",children:[e.jsx(Ue,{className:"h-12 w-12 text-green-500 mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-white mb-3",children:"Strategy Builder"}),e.jsx("p",{className:"text-gray-400",children:"Create, test, and optimize complex options strategies with our intuitive builder"})]}),e.jsxs("div",{className:"bg-gray-800 p-8 rounded-xl hover:bg-gray-750 transition-colors",children:[e.jsx(Be,{className:"h-12 w-12 text-purple-500 mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-white mb-3",children:"Risk Management"}),e.jsx("p",{className:"text-gray-400",children:"Sophisticated risk analysis and portfolio protection tools"})]}),e.jsxs("div",{className:"bg-gray-800 p-8 rounded-xl hover:bg-gray-750 transition-colors",children:[e.jsx(re,{className:"h-12 w-12 text-yellow-500 mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-white mb-3",children:"Performance Tracking"}),e.jsx("p",{className:"text-gray-400",children:"Detailed analytics on your trading performance and P&L"})]}),e.jsxs("div",{className:"bg-gray-800 p-8 rounded-xl hover:bg-gray-750 transition-colors",children:[e.jsx(ie,{className:"h-12 w-12 text-red-500 mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-white mb-3",children:"Educational Resources"}),e.jsx("p",{className:"text-gray-400",children:"Comprehensive learning materials and trading courses"})]}),e.jsxs("div",{className:"bg-gray-800 p-8 rounded-xl hover:bg-gray-750 transition-colors",children:[e.jsx(ce,{className:"h-12 w-12 text-indigo-500 mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-white mb-3",children:"Community"}),e.jsx("p",{className:"text-gray-400",children:"Connect with other traders and share strategies"})]}),e.jsxs("div",{className:"bg-gray-800 p-8 rounded-xl hover:bg-gray-750 transition-colors",children:[e.jsx(le,{className:"h-12 w-12 text-yellow-500 mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-white mb-3",children:"Agent API"}),e.jsx("p",{className:"text-gray-400",children:"Connect with other traders and share strategies"})]})]})]})}),m&&e.jsx("section",{className:"py-20 bg-gray-800",id:"deals",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-16",children:[e.jsxs("div",{className:"flex items-center justify-center mb-4",children:[e.jsx(M,{className:"h-8 w-8 text-red-500 mr-3"}),e.jsx("h2",{className:"text-4xl font-bold text-white",children:"Limited Time Deals"})]}),e.jsx("p",{className:"text-xl text-gray-400",children:"Don't miss out on these exclusive offers"})]}),e.jsx(st,{onSelectDeal:_e,onClaimDeal:ve,className:"max-w-4xl mx-auto"})]})}),e.jsx("section",{className:"py-20 bg-gray-800",id:"pricing",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-16",children:[e.jsx("h2",{className:"text-4xl font-bold text-white mb-4",children:"Choose Your Plan"}),e.jsx("p",{className:"text-xl text-gray-400",children:"Start free, upgrade when you're ready to scale"})]}),e.jsx("div",{className:"max-w-md mx-auto mb-8",children:e.jsx(at,{plan:"monthly",originalAmount:29,onCouponApplied:je,onCouponRemoved:Ne,appliedCoupon:c})}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"bg-gray-900 p-8 rounded-xl border border-gray-700",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h3",{className:"text-2xl font-bold text-white mb-2",children:"Basic"}),e.jsxs("div",{className:"text-4xl font-bold text-white mb-2",children:[e.jsx("span",{className:"text-2xl",children:"$"}),"29",e.jsx("span",{className:"text-lg text-gray-400",children:"/month"})]}),e.jsx("p",{className:"text-gray-400",children:"Perfect for beginners"})]}),e.jsxs("ul",{className:"space-y-4 mb-8",children:[e.jsxs("li",{className:"flex items-center text-gray-300",children:[e.jsx(_,{className:"h-5 w-5 text-green-500 mr-3"}),"Real-time market data"]}),e.jsxs("li",{className:"flex items-center text-gray-300",children:[e.jsx(_,{className:"h-5 w-5 text-green-500 mr-3"}),"Basic analytics"]}),e.jsxs("li",{className:"flex items-center text-gray-300",children:[e.jsx(_,{className:"h-5 w-5 text-green-500 mr-3"}),"5 watchlists"]}),e.jsxs("li",{className:"flex items-center text-gray-300",children:[e.jsx(_,{className:"h-5 w-5 text-green-500 mr-3"}),"Email support"]})]}),e.jsx("button",{onClick:()=>I("monthly"),className:"w-full bg-blue-600 hover:bg-blue-700 text-white py-3 rounded-lg font-semibold transition-colors",children:"Get Started"}),j("monthly").hasDiscount&&e.jsxs("p",{className:"text-center text-green-400 text-sm mt-2",children:["Save $",j("monthly").savings," with this deal!"]})]}),e.jsxs("div",{className:"bg-gray-900 p-8 rounded-xl border-2 border-blue-500 relative",children:[e.jsx("div",{className:"absolute -top-4 left-1/2 transform -translate-x-1/2",children:e.jsx("span",{className:"bg-blue-500 text-white px-4 py-1 rounded-full text-sm font-semibold",children:"Most Popular"})}),e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h3",{className:"text-2xl font-bold text-white mb-2",children:"Pro"}),j("yearly").hasDiscount&&e.jsx("div",{className:"mb-2",children:e.jsx("span",{className:"bg-red-500 text-white px-2 py-1 rounded text-sm font-bold",children:j("yearly").discountText})}),e.jsxs("div",{className:"text-4xl font-bold text-white mb-2",children:[e.jsx("span",{className:"text-2xl",children:"$"}),"79",e.jsx("span",{className:"text-lg text-gray-400",children:"/month"})]}),j("monthly").hasDiscount&&e.jsx("div",{className:"text-sm text-gray-400 line-through mb-2",children:"Was $79/month"}),e.jsx("p",{className:"text-gray-400",children:"For serious traders"})]}),e.jsxs("ul",{className:"space-y-4 mb-8",children:[e.jsxs("li",{className:"flex items-center text-gray-300",children:[e.jsx(_,{className:"h-5 w-5 text-green-500 mr-3"}),"Everything in Basic"]}),e.jsxs("li",{className:"flex items-center text-gray-300",children:[e.jsx(_,{className:"h-5 w-5 text-green-500 mr-3"}),"Advanced analytics"]}),e.jsxs("li",{className:"flex items-center text-gray-300",children:[e.jsx(_,{className:"h-5 w-5 text-green-500 mr-3"}),"Unlimited watchlists"]}),e.jsxs("li",{className:"flex items-center text-gray-300",children:[e.jsx(_,{className:"h-5 w-5 text-green-500 mr-3"}),"Strategy builder"]}),e.jsxs("li",{className:"flex items-center text-gray-300",children:[e.jsx(_,{className:"h-5 w-5 text-green-500 mr-3"}),"Priority support"]})]}),e.jsx("button",{onClick:()=>I("monthly"),className:"w-full bg-blue-600 hover:bg-blue-700 text-white py-3 rounded-lg font-semibold transition-colors",children:"Upgrade to Pro"}),j("monthly").hasDiscount&&e.jsxs("p",{className:"text-center text-green-400 text-sm mt-2",children:["Save $",j("monthly").savings," with this deal!"]})]}),e.jsxs("div",{className:"bg-gray-900 p-8 rounded-xl border border-gray-700",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h3",{className:"text-2xl font-bold text-white mb-2",children:"Enterprise"}),j("yearly").hasDiscount&&e.jsx("div",{className:"mb-2",children:e.jsx("span",{className:"bg-red-500 text-white px-2 py-1 rounded text-sm font-bold",children:j("yearly").discountText})}),e.jsxs("div",{className:"text-4xl font-bold text-white mb-2",children:[e.jsx("span",{className:"text-2xl",children:"$"}),"199",e.jsx("span",{className:"text-lg text-gray-400",children:"/month"})]}),j("yearly").hasDiscount&&e.jsx("div",{className:"text-sm text-gray-400 line-through mb-2",children:"Was $199/month"}),e.jsx("p",{className:"text-gray-400",children:"For institutions"})]}),e.jsxs("ul",{className:"space-y-4 mb-8",children:[e.jsxs("li",{className:"flex items-center text-gray-300",children:[e.jsx(_,{className:"h-5 w-5 text-green-500 mr-3"}),"Everything in Pro"]}),e.jsxs("li",{className:"flex items-center text-gray-300",children:[e.jsx(_,{className:"h-5 w-5 text-green-500 mr-3"}),"Custom integrations"]}),e.jsxs("li",{className:"flex items-center text-gray-300",children:[e.jsx(_,{className:"h-5 w-5 text-green-500 mr-3"}),"Dedicated support"]}),e.jsxs("li",{className:"flex items-center text-gray-300",children:[e.jsx(_,{className:"h-5 w-5 text-green-500 mr-3"}),"White-label options"]})]}),e.jsx("button",{onClick:()=>I("yearly"),className:"w-full bg-blue-600 hover:bg-blue-700 text-white py-3 rounded-lg font-semibold transition-colors",children:"Contact Sales"}),j("yearly").hasDiscount&&e.jsxs("p",{className:"text-center text-green-400 text-sm mt-2",children:["Save $",j("yearly").savings," with this deal!"]})]})]})]})}),e.jsx("section",{className:"py-20 bg-gray-900",id:"newsletter",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[e.jsx(Ye,{className:"h-16 w-16 text-blue-500 mx-auto mb-6"}),e.jsx("h2",{className:"text-3xl font-bold text-white mb-4",children:"Stay Updated"}),e.jsx("p",{className:"text-xl text-gray-400 mb-8",children:"Get the latest market insights and trading tips delivered to your inbox"}),a?e.jsxs("div",{className:"text-green-400 text-lg",children:[e.jsx(_,{className:"h-6 w-6 inline mr-2"}),"Thanks for subscribing!"]}):e.jsxs("form",{onSubmit:be,className:"flex flex-col sm:flex-row gap-4 max-w-md mx-auto",children:[e.jsx("input",{type:"email",value:l,onChange:f=>t(f.target.value),placeholder:"Enter your email",className:"flex-1 px-4 py-3 rounded-lg bg-gray-800 text-white border border-gray-700 focus:border-blue-500 focus:outline-none",required:!0}),e.jsx("button",{type:"submit",disabled:r,className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg font-semibold transition-colors disabled:opacity-50",children:r?"Subscribing...":"Subscribe"})]})]})}),e.jsx("section",{className:"py-20 bg-gray-800",id:"support",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[e.jsx(B,{className:"h-16 w-16 text-yellow-500 mx-auto mb-6"}),e.jsx("h2",{className:"text-3xl font-bold text-white mb-4",children:"Support Our Work"}),e.jsx("p",{className:"text-xl text-gray-400 mb-8",children:"Help us continue building amazing trading tools"}),e.jsxs("div",{className:"flex flex-wrap justify-center gap-4",children:[e.jsxs("button",{onClick:()=>U(),className:"bg-yellow-600 hover:bg-yellow-700 text-white px-6 py-3 rounded-lg font-semibold transition-colors flex items-center",children:[e.jsx(B,{className:"mr-2 h-5 w-5"}),"Buy us a coffee - $5"]}),e.jsxs("button",{onClick:()=>U(),className:"bg-yellow-600 hover:bg-yellow-700 text-white px-6 py-3 rounded-lg font-semibold transition-colors flex items-center",children:[e.jsx(B,{className:"mr-2 h-5 w-5"}),"Support us - $10"]}),e.jsxs("button",{onClick:()=>U(),className:"bg-yellow-600 hover:bg-yellow-700 text-white px-6 py-3 rounded-lg font-semibold transition-colors flex items-center",children:[e.jsx(ze,{className:"mr-2 h-5 w-5"}),"Sponsor us - $25"]})]})]})}),e.jsx("footer",{className:"bg-black py-12",id:"footer",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"grid md:grid-cols-4 gap-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-white font-semibold mb-4",children:"Options World"}),e.jsx("p",{className:"text-gray-400",children:"Professional options trading platform for serious traders"})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-white font-semibold mb-4",children:"Product"}),e.jsxs("ul",{className:"space-y-2 text-gray-400",children:[e.jsx("li",{children:e.jsx(w,{to:"/app",className:"hover:text-white transition-colors",children:"Features"})}),e.jsx("li",{children:e.jsx(w,{to:"/app/trading",className:"hover:text-white transition-colors",children:"Trading Platform"})}),e.jsx("li",{children:e.jsx(w,{to:"/app/learning",className:"hover:text-white transition-colors",children:"Learning Resources"})}),e.jsx("li",{children:e.jsx(w,{to:"/app/strategies",className:"hover:text-white transition-colors",children:"Strategy Library"})}),e.jsx("li",{children:e.jsx(w,{to:"/agent",className:"hover:text-white transition-colors",children:"Agent API"})})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-white font-semibold mb-4",children:"Company"}),e.jsxs("ul",{className:"space-y-2 text-gray-400",children:[e.jsx("li",{children:e.jsx(w,{to:"/construction",className:"hover:text-white transition-colors",children:"About"})}),e.jsx("li",{children:e.jsx(w,{to:"/construction",className:"hover:text-white transition-colors",children:"Blog"})}),e.jsx("li",{children:e.jsx(w,{to:"/construction",className:"hover:text-white transition-colors",children:"Careers"})}),e.jsx("li",{children:e.jsx(w,{to:"/construction",className:"hover:text-white transition-colors",children:"Contact"})})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-white font-semibold mb-4",children:"Support"}),e.jsxs("ul",{className:"space-y-2 text-gray-400",children:[e.jsx("li",{children:e.jsx(w,{to:"/app/community",className:"hover:text-white transition-colors",children:"Community"})}),e.jsx("li",{children:e.jsx(w,{to:"/construction",className:"hover:text-white transition-colors",children:"Help Center"})}),e.jsx("li",{children:e.jsx(w,{to:"/construction",className:"hover:text-white transition-colors",children:"Status"})}),e.jsx("li",{children:e.jsx(w,{to:"/construction",className:"hover:text-white transition-colors",children:"Privacy"})})]})]})]}),e.jsxs("div",{className:"border-t border-gray-800 mt-8 pt-8 text-center text-gray-400",children:[e.jsxs("p",{children:["© ",new Date().getFullYear()," Options World. All rights reserved."]}),e.jsxs("p",{className:"mt-2 text-sm",children:[e.jsx("strong",{children:"Risk Disclaimer:"})," Options trading involves substantial risk and is not suitable for all investors. You may lose all of your invested capital. Past performance is not indicative of future results."]}),e.jsxs("div",{className:"flex justify-center space-x-4 mt-4",children:[e.jsx("a",{href:"#home",className:"text-gray-500 hover:text-white transition-colors",children:"Home"}),e.jsx("a",{href:"#features",className:"text-gray-500 hover:text-white transition-colors",children:"Features"}),e.jsx("a",{href:"#pricing",className:"text-gray-500 hover:text-white transition-colors",children:"Pricing"}),e.jsx("a",{href:"#support",className:"text-gray-500 hover:text-white transition-colors",children:"Support"})]})]})]})}),v&&e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:e.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 transition-opacity",onClick:K}),e.jsx("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",children:e.jsx("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:e.jsx(rt,{onAccept:we,onDecline:K})})})]})})]})}const it={balance:1e5,buyingPower:1e5,totalValue:1e5,dayChange:0,dayChangePercent:0,positions:[],orders:[],contracts:[],selectedUnderlying:null},ge=u.createContext(null);function nt(l,t){var a,s;switch(t.type){case"PLACE_OPTIONS_ORDER":{const r={...t.payload,id:Date.now().toString(),timestamp:new Date};return{...l,orders:[...l.orders,r]}}case"CANCEL_OPTIONS_ORDER":return{...l,orders:l.orders.filter(r=>r.id!==t.payload)};case"UPDATE_CONTRACT_PRICES":return{...l,contracts:t.payload};case"SET_SELECTED_UNDERLYING":return{...l,selectedUnderlying:t.payload};case"LOAD_OPTIONS_DATA":{const r=localStorage.getItem("optionsTradingData");if(r){const o=JSON.parse(r);return{...l,...o,orders:((a=o.orders)==null?void 0:a.map(i=>({...i,timestamp:new Date(i.timestamp)})))||[],positions:((s=o.positions)==null?void 0:s.map(i=>({...i,purchaseDate:new Date(i.purchaseDate)})))||[]}}return l}default:return l}}function ct({children:l}){const[t,a]=u.useReducer(nt,it),s=u.useRef(t);return u.useEffect(()=>{s.current=t},[t]),u.useEffect(()=>{a({type:"LOAD_OPTIONS_DATA"});const r=Math.max(1e3,parseInt({}.VITE_OPTIONS_UPDATE_INTERVAL||"5000")||5e3);console.log(`Options trading initialized with ${r}ms update interval`)},[]),u.useEffect(()=>{const r={balance:t.balance,buyingPower:t.buyingPower,totalValue:t.totalValue,dayChange:t.dayChange,dayChangePercent:t.dayChangePercent,positions:t.positions,orders:t.orders};localStorage.setItem("optionsTradingData",JSON.stringify(r))},[t]),u.useEffect(()=>{const r=Math.max(1e3,parseInt({}.VITE_OPTIONS_UPDATE_INTERVAL||"5000")||5e3);let o=null,i=!0;try{const n=()=>{try{if(!i)return;const c=s.current;if(c.contracts.length===0)return;const d=c.contracts.map(m=>{const p=(Math.random()-.5)*m.implied_volatility*.1,h=Math.max(.01,m.last*(1+p)),x=Math.max(.01,h*.98),v=h*1.02;return{...m,bid:Math.round(x*100)/100,ask:Math.round(v*100)/100,last:Math.round(h*100)/100}});a({type:"UPDATE_CONTRACT_PRICES",payload:d}),i&&(o=window.setTimeout.bind(window)(n,r))}catch(c){console.error("Error updating options prices:",c),i&&(o=window.setTimeout.bind(window)(n,r))}};o=window.setTimeout.bind(window)(n,r)}catch(n){console.error("Error setting up options price updates:",n)}return()=>{if(i=!1,o)try{window.clearTimeout.bind(window)(o)}catch(n){console.error("Error clearing options price timeout:",n)}}},[]),e.jsx(ge.Provider,{value:{state:t,dispatch:a},children:l})}function Mt(){const l=u.useContext(ge);if(!l)throw new Error("useOptionsContext must be used within an OptionsProvider");return l}const lt={balance:1e5,buyingPower:1e5,totalValue:1e5,dayChange:0,dayChangePercent:0,positions:[],orders:[],watchlist:[],stocks:[{symbol:"AAPL",name:"Apple Inc.",price:175.43,change:2.15,changePercent:1.24,volume:45234567,marketCap:28e11,pe:28.5,dividend:.96},{symbol:"GOOGL",name:"Alphabet Inc.",price:138.21,change:-1.87,changePercent:-1.33,volume:23456789,marketCap:175e10,pe:25.2},{symbol:"MSFT",name:"Microsoft Corporation",price:378.85,change:4.32,changePercent:1.15,volume:34567890,marketCap:285e10,pe:32.1,dividend:2.72},{symbol:"TSLA",name:"Tesla, Inc.",price:248.5,change:-8.75,changePercent:-3.4,volume:67890123,marketCap:79e10,pe:65.8},{symbol:"AMZN",name:"Amazon.com, Inc.",price:145.86,change:1.23,changePercent:.85,volume:28901234,marketCap:152e10,pe:45.2}]},xe=u.createContext(null);function dt(l,t){var a,s,r;switch(t.type){case"PLACE_ORDER":{const o={...t.payload,id:Date.now().toString(),timestamp:new Date};if(t.payload.orderType==="market"){const i=l.stocks.find(n=>n.symbol===t.payload.symbol);if(i)return te(l,o.id,i.price)}return{...l,orders:[...l.orders,o]}}case"CANCEL_ORDER":return{...l,orders:l.orders.filter(o=>o.id!==t.payload)};case"FILL_ORDER":return te(l,t.payload.orderId,t.payload.filledPrice);case"ADD_TO_WATCHLIST":{const o={id:Date.now().toString(),symbol:t.payload.symbol,name:t.payload.name,price:t.payload.price,change:t.payload.change,changePercent:t.payload.changePercent,addedDate:new Date};return{...l,watchlist:[...l.watchlist,o]}}case"REMOVE_FROM_WATCHLIST":return{...l,watchlist:l.watchlist.filter(o=>o.id!==t.payload)};case"UPDATE_STOCK_PRICES":{const o=t.payload,i=l.positions.map(h=>{const x=o.find(v=>v.symbol===h.symbol);if(x){const v=h.quantity*x.price,b=v-h.quantity*h.avgPrice,A=b/(h.quantity*h.avgPrice)*100;return{...h,currentPrice:x.price,totalValue:v,unrealizedPnL:b,unrealizedPnLPercent:A}}return h}),n=l.watchlist.map(h=>{const x=o.find(v=>v.symbol===h.symbol);return x?{...h,price:x.price,change:x.change,changePercent:x.changePercent}:h}),c=i.reduce((h,x)=>h+x.totalValue,0),d=l.balance+c,m=i.reduce((h,x)=>h+(x.unrealizedPnL||0),0),p=d>0?m/d*100:0;return{...l,stocks:o,positions:i,watchlist:n,totalValue:d,dayChange:m,dayChangePercent:p}}case"LOAD_DATA":{const o=localStorage.getItem("paperTradingData");if(o){const i=JSON.parse(o);return{...l,...i,orders:((a=i.orders)==null?void 0:a.map(n=>({...n,timestamp:new Date(n.timestamp)})))||[],positions:((s=i.positions)==null?void 0:s.map(n=>({...n,purchaseDate:new Date(n.purchaseDate)})))||[],watchlist:((r=i.watchlist)==null?void 0:r.map(n=>({...n,addedDate:new Date(n.addedDate)})))||[]}}return l}default:return l}}function te(l,t,a){const s=l.orders.find(i=>i.id===t);if(!s)return l;const r=s.quantity*a,o=0;if(s.type==="buy"){if(r>l.buyingPower)return{...l,orders:l.orders.map(c=>c.id===t?{...c,status:"rejected"}:c)};const i=l.positions.findIndex(c=>c.symbol===s.symbol);let n;if(i>=0){const c=l.positions[i],d=c.quantity+s.quantity,m=(c.quantity*c.avgPrice+r)/d;n=l.positions.map((p,h)=>h===i?{...p,quantity:d,avgPrice:m,totalValue:d*a,unrealizedPnL:d*a-d*m,unrealizedPnLPercent:(a-m)/m*100}:p)}else{const c=l.stocks.find(m=>m.symbol===s.symbol),d={id:Date.now().toString(),symbol:s.symbol,name:(c==null?void 0:c.name)||s.symbol,quantity:s.quantity,avgPrice:a,currentPrice:a,totalValue:r,unrealizedPnL:0,unrealizedPnLPercent:0,purchaseDate:new Date};n=[...l.positions,d]}return{...l,balance:l.balance-r-o,buyingPower:l.buyingPower-r-o,positions:n,orders:l.orders.map(c=>c.id===t?{...c,status:"filled",filledPrice:a,filledQuantity:s.quantity}:c)}}else{const i=l.positions.find(d=>d.symbol===s.symbol);if(!i||i.quantity<s.quantity)return{...l,orders:l.orders.map(d=>d.id===t?{...d,status:"rejected"}:d)};const n=r-o,c=i.quantity===s.quantity?l.positions.filter(d=>d.symbol!==s.symbol):l.positions.map(d=>d.symbol===s.symbol?{...d,quantity:d.quantity-s.quantity,totalValue:(d.quantity-s.quantity)*a,unrealizedPnL:(d.quantity-s.quantity)*a-(d.quantity-s.quantity)*d.avgPrice,unrealizedPnLPercent:(a-d.avgPrice)/d.avgPrice*100}:d);return{...l,balance:l.balance+n,buyingPower:l.buyingPower+n,positions:c,orders:l.orders.map(d=>d.id===t?{...d,status:"filled",filledPrice:a,filledQuantity:s.quantity}:d)}}}function ut({children:l}){const[t,a]=u.useReducer(dt,lt),s=u.useRef(t);return u.useEffect(()=>{s.current=t},[t]),u.useEffect(()=>{a({type:"LOAD_DATA"}),(async()=>{try{if({}.VITE_ENABLE_MOCK_DATA==="true"){console.log("Mock data enabled, skipping Polygon service initialization");return}const{PolygonService:i}=await g(()=>Promise.resolve().then(()=>mt),void 0);await i.initializeHistoricalData(),console.log("Historical data initialization completed")}catch(o){console.warn("Failed to initialize historical data:",o)}})()},[]),u.useEffect(()=>{const r={balance:t.balance,buyingPower:t.buyingPower,totalValue:t.totalValue,dayChange:t.dayChange,dayChangePercent:t.dayChangePercent,positions:t.positions,orders:t.orders,watchlist:t.watchlist};localStorage.setItem("paperTradingData",JSON.stringify(r))},[t]),u.useEffect(()=>{let r=null,o=!0;try{const i=()=>{try{if(!o)return;const c=s.current.stocks.map(d=>{const m=(Math.random()-.5)*.1,p=d.price*(1+m),h=p-d.price;return{...d,price:Math.round(p*100)/100,change:Math.round(h*100)/100,changePercent:Math.round(m*1e4)/100}});a({type:"UPDATE_STOCK_PRICES",payload:c}),o&&(r=window.setTimeout.bind(window)(i,5e3))}catch(n){console.error("Error updating stock prices:",n),o&&(r=window.setTimeout.bind(window)(i,5e3))}};r=window.setTimeout.bind(window)(i,5e3)}catch(i){console.error("Error setting up stock price updates:",i)}return()=>{if(o=!1,r)try{window.clearTimeout.bind(window)(r)}catch(i){console.error("Error clearing stock price timeout:",i)}}},[]),u.useEffect(()=>{let r=null,o=!0;const i=()=>{o&&(r=window.setTimeout.bind(window)(async()=>{try{if(!({}.VITE_ENABLE_DATA_PERSISTENCE==="true")){i();return}await(await g(()=>Promise.resolve().then(()=>T),void 0)).HistoricalDataService.cleanupOldData(),console.log("Old historical data cleaned up")}catch(n){console.warn("Failed to cleanup old data:",n)}i()},24*60*60*1e3))};return i(),()=>{o=!1,r&&window.clearTimeout.bind(window)(r)}},[]),e.jsx(xe.Provider,{value:{state:t,dispatch:a},children:l})}function Rt(){const l=u.useContext(xe);if(!l)throw new Error("useTradingContext must be used within a TradingProvider");return l}const se=()=>({POLYGON_API_KEY:{}.VITE_POLYGON_API_KEY||"demo_api_key",BASE_URL:{}.VITE_POLYGON_BASE_URL||"https://api.polygon.io",ENABLE_MOCK_DATA:{}.VITE_ENABLE_MOCK_DATA==="true",ENABLE_REAL_TIME_DATA:{}.VITE_ENABLE_REAL_TIME_DATA==="true"}),O=[{contract_type:"call",exercise_style:"american",expiration_date:"2024-03-15",shares_per_contract:100,strike_price:580,ticker:"SPY240315C00580000",underlying_ticker:"SPY",bid:29.05,ask:29.15,last:29.1,volume:15234,open_interest:45678,implied_volatility:.25,delta:.65,gamma:.02,theta:-.15,vega:.3,intrinsic_value:0,time_value:29.1},{contract_type:"call",exercise_style:"american",expiration_date:"2024-03-15",shares_per_contract:100,strike_price:500,ticker:"QQQ240315C00500000",underlying_ticker:"QQQ",bid:15.2,ask:15.3,last:15.25,volume:12456,open_interest:38901,implied_volatility:.28,delta:.58,gamma:.025,theta:-.12,vega:.35,intrinsic_value:0,time_value:15.25},{contract_type:"call",exercise_style:"american",expiration_date:"2024-03-15",shares_per_contract:100,strike_price:230,ticker:"AAPL240315C00230000",underlying_ticker:"AAPL",bid:8.45,ask:8.55,last:8.5,volume:9876,open_interest:25432,implied_volatility:.32,delta:.42,gamma:.03,theta:-.08,vega:.28,intrinsic_value:0,time_value:8.5},{contract_type:"call",exercise_style:"american",expiration_date:"2024-03-15",shares_per_contract:100,strike_price:1e3,ticker:"TSLA240315C01000000",underlying_ticker:"TSLA",bid:45.8,ask:46.2,last:46,volume:7654,open_interest:18765,implied_volatility:.55,delta:.35,gamma:.015,theta:-.25,vega:.45,intrinsic_value:0,time_value:46},{contract_type:"call",exercise_style:"american",expiration_date:"2024-03-15",shares_per_contract:100,strike_price:1400,ticker:"NVDA240315C01400000",underlying_ticker:"NVDA",bid:125.5,ask:126.5,last:126,volume:5432,open_interest:12345,implied_volatility:.48,delta:.68,gamma:.008,theta:-.35,vega:.52,intrinsic_value:0,time_value:126}];class fe{static async fetchOptionsChain(t){const{ENABLE_MOCK_DATA:a,ENABLE_REAL_TIME_DATA:s,BASE_URL:r,POLYGON_API_KEY:o}=se();if(a||!s)return this.getSimulatedOptionsChain(t);try{const i=await fetch(`${r}/v3/reference/options/contracts?underlying_ticker=${t}&limit=1000&apikey=${o}`);if(!i.ok)return console.warn("Polygon API call failed, falling back to mock data"),this.getSimulatedOptionsChain(t);const n=await i.json();return this.transformPolygonData(n)}catch(i){return console.warn("Error fetching from Polygon API, using mock data:",i),this.getSimulatedOptionsChain(t)}}static getSimulatedOptionsChain(t){const a=O.filter(s=>s.underlying_ticker===t);return{underlying:t,contracts:a,lastUpdated:new Date}}static transformPolygonData(t){var s;const a=((s=t.results)==null?void 0:s.map(r=>({contract_type:r.contract_type,exercise_style:r.exercise_style,expiration_date:r.expiration_date,shares_per_contract:r.shares_per_contract,strike_price:r.strike_price,ticker:r.ticker,underlying_ticker:r.underlying_ticker,bid:r.strike_price*.05,ask:r.strike_price*.06,last:r.strike_price*.055,volume:Math.floor(Math.random()*1e4),open_interest:Math.floor(Math.random()*5e4),implied_volatility:.2+Math.random()*.3,delta:Math.random()*.8,gamma:Math.random()*.1,theta:-Math.random()*.05,vega:Math.random()*.3,intrinsic_value:Math.max(0,580-r.strike_price),time_value:r.strike_price*.055-Math.max(0,580-r.strike_price)})))||[];return{underlying:t.underlying||"UNKNOWN",contracts:a,lastUpdated:new Date}}static async fetchHistoricalData(t,a=14){const{ENABLE_MOCK_DATA:s,ENABLE_REAL_TIME_DATA:r,BASE_URL:o,POLYGON_API_KEY:i}=se();try{const{HistoricalDataService:n}=await g(()=>Promise.resolve().then(()=>T),void 0),c=await n.getHistoricalData(t,a);if(c.length>0)return console.log(`Retrieved ${c.length} historical data points from Supabase for ${t}`),c}catch(n){console.warn("Failed to fetch stored data, using simulated data:",n)}if(s||!r){const n=this.generateSimulatedHistoricalData(t,a);try{const{HistoricalDataService:c}=await g(()=>Promise.resolve().then(()=>T),void 0);await c.storeHistoricalData(t,n)}catch(c){console.warn("Failed to store simulated data:",c)}return n}try{const n=new Date,c=new Date(n.getTime()-a*24*60*60*1e3),d=await fetch(`${o}/v2/aggs/ticker/${t}/range/1/day/${c.toISOString().split("T")[0]}/${n.toISOString().split("T")[0]}?apikey=${i}`);if(!d.ok)return console.warn("Historical data API call failed, using simulated data"),this.generateSimulatedHistoricalData(t,a);const m=await d.json(),p=this.transformHistoricalData(m);try{const{HistoricalDataService:h}=await g(()=>Promise.resolve().then(()=>T),void 0);await h.storeHistoricalData(t,p)}catch(h){console.warn("Failed to store real data:",h)}return p}catch(n){console.warn("Error fetching historical data, using simulated:",n);const c=this.generateSimulatedHistoricalData(t,a);try{const{HistoricalDataService:d}=await g(()=>Promise.resolve().then(()=>T),void 0);await d.storeHistoricalData(t,c)}catch(d){console.warn("Failed to store fallback data:",d)}return c}}static generateSimulatedHistoricalData(t,a){const s=[],r=this.getBasePriceForTicker(t);for(let o=a-1;o>=0;o--){const i=new Date;i.setDate(i.getDate()-o);const n=(Math.random()-.5)*2,c=r*(1+n*.01),d=c*(1+(Math.random()-.5)*.02),m=Math.max(c,d)*(1+Math.random()*.01),p=Math.min(c,d)*(1-Math.random()*.01);s.push({date:i.toISOString().split("T")[0],open:c,high:m,low:p,close:d,volume:Math.floor(Math.random()*1e6)})}return s}static transformHistoricalData(t){var a;return((a=t.results)==null?void 0:a.map(s=>({date:new Date(s.t).toISOString().split("T")[0],open:s.o,high:s.h,low:s.l,close:s.c,volume:s.v})))||[]}static getBasePriceForTicker(t){return{SPY:580,QQQ:500,AAPL:185,MSFT:420,GOOGL:150,AMZN:175,TSLA:190,NVDA:1400}[t]||100}static getTopLiquidOptions(){return[...O]}static async initializeHistoricalData(){console.log("Initializing historical data for top liquid options...");const t=[...new Set(O.map(a=>a.underlying_ticker))];for(const a of t)try{await this.fetchHistoricalData(a,14),console.log(`Initialized historical data for ${a}`)}catch(s){console.error(`Failed to initialize data for ${a}:`,s)}for(const a of O)try{const s=await g(()=>Promise.resolve().then(()=>T),void 0),r=this.generateSimulatedOptionsHistoricalData(a,14);await s.HistoricalDataService.storeOptionsHistoricalData(a.ticker,a.underlying_ticker,r),console.log(`Initialized options historical data for ${a.ticker}`)}catch(s){console.error(`Failed to initialize options data for ${a.ticker}:`,s)}console.log("Historical data initialization complete")}static generateSimulatedOptionsHistoricalData(t,a){const s=[];for(let r=a-1;r>=0;r--){const o=new Date;o.setDate(o.getDate()-r);const i=(Math.random()-.5)*.1,n=t.bid*(1+i),c=t.ask*(1+i),d=t.last*(1+i);s.push({date:o.toISOString().split("T")[0],bid:n,ask:c,last:d,volume:Math.floor(Math.random()*t.volume),open_interest:t.open_interest+Math.floor((Math.random()-.5)*1e3),implied_volatility:t.implied_volatility*(1+(Math.random()-.5)*.1),delta:t.delta*(1+(Math.random()-.5)*.05),gamma:t.gamma*(1+(Math.random()-.5)*.1),theta:t.theta*(1+(Math.random()-.5)*.1),vega:t.vega*(1+(Math.random()-.5)*.1)})}return s}}const mt=Object.freeze(Object.defineProperty({__proto__:null,PolygonService:fe},Symbol.toStringTag,{value:"Module"})),P=()=>({ENABLE_DATA_PERSISTENCE:{}.VITE_ENABLE_DATA_PERSISTENCE==="true",RETENTION_DAYS:parseInt({}.VITE_HISTORICAL_DATA_RETENTION_DAYS||"30")});class L{static async storeHistoricalData(t,a){const{ENABLE_DATA_PERSISTENCE:s}=P();if(!s){console.log("Data persistence disabled, skipping data storage");return}try{const{supabase:r}=await g(()=>import("./supabase-a5f1efba.js"),["assets/supabase-a5f1efba.js","assets/react-vendor-1447f830.js","assets/ui-vendor-6492ecb9.js"]);if(!r){console.log("Supabase not configured, using local storage fallback"),this.storeInLocalStorage(`historical_${t}`,a);return}const o=a.map(n=>({ticker:t,date:n.date,open:n.open,high:n.high,low:n.low,close:n.close,volume:n.volume})),{error:i}=await r.from("historical_data").upsert(o,{onConflict:"ticker,date",ignoreDuplicates:!1});if(i){console.error("Error storing historical data:",i),this.storeInLocalStorage(`historical_${t}`,a);return}console.log(`Stored ${a.length} historical data points for ${t}`)}catch(r){console.error("Failed to store historical data:",r),this.storeInLocalStorage(`historical_${t}`,a)}}static async getHistoricalData(t,a=14){const{ENABLE_DATA_PERSISTENCE:s}=P();if(!s)return console.log("Data persistence disabled, returning empty data"),[];try{const{supabase:r}=await g(()=>import("./supabase-a5f1efba.js"),["assets/supabase-a5f1efba.js","assets/react-vendor-1447f830.js","assets/ui-vendor-6492ecb9.js"]);if(!r)return console.log("Supabase not configured, checking local storage"),this.getFromLocalStorage(`historical_${t}`)||[];const o=new Date;o.setDate(o.getDate()-a);const{data:i,error:n}=await r.from("historical_data").select("*").eq("ticker",t).gte("date",o.toISOString().split("T")[0]).order("date",{ascending:!0});return n?(console.error("Error fetching historical data:",n),this.getFromLocalStorage(`historical_${t}`)||[]):(i==null?void 0:i.map(c=>({date:c.date,open:c.open,high:c.high,low:c.low,close:c.close,volume:c.volume})))||[]}catch(r){return console.error("Failed to fetch historical data:",r),this.getFromLocalStorage(`historical_${t}`)||[]}}static async storeOptionsHistoricalData(t,a,s){const{ENABLE_DATA_PERSISTENCE:r}=P();if(!r){console.log("Data persistence disabled, skipping options data storage");return}try{const{supabase:o}=await g(()=>import("./supabase-a5f1efba.js"),["assets/supabase-a5f1efba.js","assets/react-vendor-1447f830.js","assets/ui-vendor-6492ecb9.js"]);if(!o){console.log("Supabase not configured, using local storage fallback"),this.storeInLocalStorage(`options_${t}`,s);return}const i=s.map(c=>({contract_ticker:t,underlying_ticker:a,date:c.date,bid:c.bid,ask:c.ask,last:c.last,volume:c.volume,open_interest:c.open_interest,implied_volatility:c.implied_volatility,delta:c.delta,gamma:c.gamma,theta:c.theta,vega:c.vega})),{error:n}=await o.from("options_historical_data").upsert(i,{onConflict:"contract_ticker,date",ignoreDuplicates:!1});if(n){console.error("Error storing options historical data:",n),this.storeInLocalStorage(`options_${t}`,s);return}console.log(`Stored ${s.length} options historical data points for ${t}`)}catch(o){console.error("Failed to store options historical data:",o),this.storeInLocalStorage(`options_${t}`,s)}}static async getOptionsHistoricalData(t,a=14){const{ENABLE_DATA_PERSISTENCE:s}=P();if(!s)return console.log("Data persistence disabled, returning empty options data"),[];try{const{supabase:r}=await g(()=>import("./supabase-a5f1efba.js"),["assets/supabase-a5f1efba.js","assets/react-vendor-1447f830.js","assets/ui-vendor-6492ecb9.js"]);if(!r)return console.log("Supabase not configured, checking local storage"),this.getFromLocalStorage(`options_${t}`)||[];const o=new Date;o.setDate(o.getDate()-a);const{data:i,error:n}=await r.from("options_historical_data").select("*").eq("contract_ticker",t).gte("date",o.toISOString().split("T")[0]).order("date",{ascending:!0});return n?(console.error("Error fetching options historical data:",n),this.getFromLocalStorage(`options_${t}`)||[]):(i==null?void 0:i.map(c=>({date:c.date,bid:c.bid,ask:c.ask,last:c.last,volume:c.volume,open_interest:c.open_interest,implied_volatility:c.implied_volatility,delta:c.delta,gamma:c.gamma,theta:c.theta,vega:c.vega})))||[]}catch(r){return console.error("Failed to fetch options historical data:",r),this.getFromLocalStorage(`options_${t}`)||[]}}static async cleanupOldData(){const{ENABLE_DATA_PERSISTENCE:t,RETENTION_DAYS:a}=P();if(t)try{const{supabase:s}=await g(()=>import("./supabase-a5f1efba.js"),["assets/supabase-a5f1efba.js","assets/react-vendor-1447f830.js","assets/ui-vendor-6492ecb9.js"]);if(!s){console.log("Supabase not configured, skipping cleanup");return}const r=new Date;r.setDate(r.getDate()-a);const{error:o}=await s.from("historical_data").delete().lt("date",r.toISOString().split("T")[0]);o&&console.error("Error cleaning up stock historical data:",o);const{error:i}=await s.from("options_historical_data").delete().lt("date",r.toISOString().split("T")[0]);i&&console.error("Error cleaning up options historical data:",i),console.log(`Cleaned up historical data older than ${a} days`)}catch(s){console.error("Failed to cleanup old data:",s)}}static async getStorageStats(){var a,s;const{ENABLE_DATA_PERSISTENCE:t}=P();if(!t)return{stockDataPoints:0,optionsDataPoints:0,oldestDate:null,newestDate:null};try{const o=(await g(()=>import("./supabase-a5f1efba.js"),["assets/supabase-a5f1efba.js","assets/react-vendor-1447f830.js","assets/ui-vendor-6492ecb9.js"])).supabase;if(!o)return this.getLocalStorageStats();const{count:i}=await o.from("historical_data").select("*",{count:"exact",head:!0}),{count:n}=await o.from("options_historical_data").select("*",{count:"exact",head:!0}),{data:c}=await o.from("historical_data").select("date").order("date",{ascending:!0}).limit(1),{data:d}=await o.from("historical_data").select("date").order("date",{ascending:!1}).limit(1);return{stockDataPoints:i||0,optionsDataPoints:n||0,oldestDate:((a=c==null?void 0:c[0])==null?void 0:a.date)||null,newestDate:((s=d==null?void 0:d[0])==null?void 0:s.date)||null}}catch(r){return console.error("Failed to get storage stats:",r),this.getLocalStorageStats()}}static storeInLocalStorage(t,a){try{localStorage.setItem(t,JSON.stringify(a))}catch(s){console.error("Failed to store in local storage:",s)}}static getFromLocalStorage(t){try{const a=localStorage.getItem(t);return a?JSON.parse(a):null}catch(a){return console.error("Failed to get from local storage:",a),null}}static getLocalStorageStats(){let t=0,a=0,s=null,r=null;try{for(let o=0;o<localStorage.length;o++){const i=localStorage.key(o);if(i!=null&&i.startsWith("historical_")){const n=this.getFromLocalStorage(i);n&&Array.isArray(n)&&(t+=n.length)}else if(i!=null&&i.startsWith("options_")){const n=this.getFromLocalStorage(i);n&&Array.isArray(n)&&(a+=n.length)}}}catch(o){console.error("Failed to get local storage stats:",o)}return{stockDataPoints:t,optionsDataPoints:a,oldestDate:s,newestDate:r}}}const T=Object.freeze(Object.defineProperty({__proto__:null,HistoricalDataService:L},Symbol.toStringTag,{value:"Module"}));class D{static async fetchAndStoreOptionsData(){if(console.log("Starting options data fetch and store process..."),!this.ENABLE_REAL_TIME_DATA||!this.POLYGON_API_KEY||this.POLYGON_API_KEY==="demo_api_key"){console.log("Real-time data disabled or API key not configured, using mock data"),await this.generateAndStoreMockData();return}try{for(const t of this.TRACKED_OPTIONS)console.log(`Fetching options data for ${t}...`),await this.fetchOptionsForUnderlying(t),await this.delay(1e3);console.log("Options data fetch and store completed successfully")}catch(t){console.error("Error in fetchAndStoreOptionsData:",t),await this.generateAndStoreMockData()}}static async fetchOptionsForUnderlying(t){try{const a=`${this.BASE_URL}/v3/reference/options/contracts?underlying_ticker=${t}&limit=1000&apikey=${this.POLYGON_API_KEY}`,s=await fetch(a);if(!s.ok)throw new Error(`Failed to fetch contracts for ${t}: ${s.status}`);const r=await s.json();if(!r.results||r.results.length===0){console.log(`No contracts found for ${t}`);return}const o=this.filterLiquidContracts(r.results,t);console.log(`Found ${o.length} liquid contracts for ${t}`);for(const i of o.slice(0,20))await this.fetchContractHistoricalData(i),await this.delay(500)}catch(a){console.error(`Error fetching options for ${t}:`,a)}}static filterLiquidContracts(t,a){const s=new Date,r=new Date(s.getTime()+60*24*60*60*1e3);return t.filter(o=>{const i=new Date(o.expiration_date);return i>s&&i<=r}).sort((o,i)=>{const n=new Date(o.expiration_date),c=new Date(i.expiration_date);return n.getTime()!==c.getTime()?n.getTime()-c.getTime():Math.abs(o.strike_price-100)-Math.abs(i.strike_price-100)})}static async fetchContractHistoricalData(t){try{const a=new Date,s=new Date(a.getTime()-14*24*60*60*1e3),r=`${this.BASE_URL}/v2/aggs/ticker/${t.ticker}/range/1/day/${s.toISOString().split("T")[0]}/${a.toISOString().split("T")[0]}?apikey=${this.POLYGON_API_KEY}`,o=await fetch(r);if(!o.ok){console.warn(`Failed to fetch historical data for ${t.ticker}: ${o.status}`);return}const i=await o.json();if(!i.results||i.results.length===0){console.log(`No historical data found for ${t.ticker}`);return}const n=i.results.map(c=>({date:new Date(c.t).toISOString().split("T")[0],bid:c.o*.98,ask:c.o*1.02,last:c.c,volume:c.v,open_interest:Math.floor(Math.random()*1e4)+1e3,implied_volatility:.2+Math.random()*.3,delta:t.contract_type==="call"?Math.random()*.8:-Math.random()*.8,gamma:Math.random()*.1,theta:-Math.random()*.05,vega:Math.random()*.3}));await L.storeOptionsHistoricalData(t.ticker,t.underlying_ticker,n),console.log(`Stored ${n.length} data points for ${t.ticker}`)}catch(a){console.error(`Error fetching historical data for ${t.ticker}:`,a)}}static async generateAndStoreMockData(){console.log("Generating mock options data...");const t=fe.getTopLiquidOptions();for(const a of t){const s=this.generateMockHistoricalData(a,14);try{await L.storeOptionsHistoricalData(a.ticker,a.underlying_ticker,s),console.log(`Stored mock data for ${a.ticker}`)}catch(r){console.error(`Error storing mock data for ${a.ticker}:`,r)}}}static generateMockHistoricalData(t,a){const s=[];for(let r=a-1;r>=0;r--){const o=new Date;o.setDate(o.getDate()-r);const i=(Math.random()-.5)*.2,n=t.last,c=Math.max(.01,n*(1+i));s.push({date:o.toISOString().split("T")[0],bid:Math.max(.01,c*.98),ask:c*1.02,last:c,volume:Math.floor(Math.random()*t.volume*.5)+100,open_interest:t.open_interest+Math.floor((Math.random()-.5)*1e3),implied_volatility:t.implied_volatility*(1+(Math.random()-.5)*.1),delta:t.delta*(1+(Math.random()-.5)*.05),gamma:t.gamma*(1+(Math.random()-.5)*.1),theta:t.theta*(1+(Math.random()-.5)*.1),vega:t.vega*(1+(Math.random()-.5)*.1)})}return s}static scheduleAfterMarketDataFetch(){console.log("Setting up after-market options data scheduler...");const t=()=>{const a=new Date,s=new Date;s.setUTCHours(5,0,0,0),a>=s&&s.setDate(s.getDate()+1);const r=s.getTime()-a.getTime();console.log(`Next options data fetch scheduled for: ${s.toISOString()}`),console.log(`Time until next run: ${Math.round(r/1e3/60)} minutes`),window.setTimeout.bind(window)(async()=>{console.log("Running scheduled options data fetch..."),await this.fetchAndStoreOptionsData(),t()},Math.max(1e3,r))};t(),window.setTimeout.bind(window)(()=>{console.log("Running initial options data fetch..."),this.fetchAndStoreOptionsData()},5e3)}static isAfterMarketHours(){const t=new Date,a=new Date(t.toLocaleString("en-US",{timeZone:"America/New_York"})),s=a.getDay(),r=a.getHours();return s===0||s===6?!0:r>=16||r<9}static getNextMarketClose(){const t=new Date,a=new Date(t.toLocaleString("en-US",{timeZone:"America/New_York"})),s=new Date(a);if(s.setHours(16,0,0,0),a>=s||a.getDay()===0||a.getDay()===6){do s.setDate(s.getDate()+1);while(s.getDay()===0||s.getDay()===6);s.setHours(16,0,0,0)}return s}static delay(t){return new Promise(a=>{try{window.setTimeout.bind(window)(a,Math.max(100,t||1e3))}catch(s){console.error("Error in delay function:",s),a()}})}static async getDataFetchStats(){try{const t=await L.getStorageStats();return{lastFetch:new Date,totalContracts:Math.floor(t.optionsDataPoints/14),dataPoints:t.optionsDataPoints,nextScheduledFetch:this.getNextMarketClose()}}catch(t){return console.error("Error getting data fetch stats:",t),{lastFetch:null,totalContracts:0,dataPoints:0,nextScheduledFetch:this.getNextMarketClose()}}}static async triggerManualFetch(){console.log("Manual options data fetch triggered..."),await this.fetchAndStoreOptionsData()}}N(D,"POLYGON_API_KEY",{}.VITE_POLYGON_API_KEY),N(D,"BASE_URL","https://api.polygon.io"),N(D,"ENABLE_REAL_TIME_DATA",{}.VITE_ENABLE_REAL_TIME_DATA==="true"),N(D,"TRACKED_OPTIONS",["SPY","QQQ","AAPL","TSLA","NVDA","MSFT","AMZN","GOOGL"]);const R=class R{constructor(){N(this,"schedulerActive",!1);N(this,"currentTimeout",null)}static getInstance(){return this.instance||(this.instance=new R),this.instance}start(){if(this.schedulerActive){console.log("Options data scheduler is already running");return}console.log("Starting options data scheduler..."),this.schedulerActive=!0,this.scheduleNextFetch(),window.setTimeout(()=>{this.runDataFetch().catch(t=>{console.error("Error in initial options data fetch:",t)})},1e4)}stop(){if(console.log("Stopping options data scheduler..."),this.schedulerActive=!1,this.currentTimeout){try{window.clearTimeout.bind(window)(this.currentTimeout)}catch(t){console.error("Error clearing timeout:",t)}this.currentTimeout=null}}scheduleNextFetch(){if(this.schedulerActive)try{const t=this.calculateNextFetchTime(),a=Math.max(1e3,t.getTime()-Date.now());console.log(`Next options data fetch scheduled for: ${t.toISOString()}`),console.log(`Time until next fetch: ${Math.round(a/1e3/60)} minutes`),this.currentTimeout=window.setTimeout.bind(window)(()=>{this.runDataFetch().catch(s=>{console.error("Error in scheduled options data fetch:",s),this.scheduleNextFetch()})},a)}catch(t){console.error("Error scheduling next fetch:",t),this.currentTimeout=window.setTimeout.bind(window)(()=>{this.scheduleNextFetch()},60*60*1e3)}}calculateNextFetchTime(){const t=new Date,a=new Date(t.toLocaleString("en-US",{timeZone:"America/New_York"})),s=new Date(a);for(s.setHours(18,0,0,0),a>=s&&s.setDate(s.getDate()+1);s.getDay()===0||s.getDay()===6;)s.setDate(s.getDate()+1);return new Date(s.toLocaleString())}async runDataFetch(){if(this.schedulerActive){try{console.log("Running scheduled options data fetch..."),await D.fetchAndStoreOptionsData(),console.log("Scheduled options data fetch completed successfully")}catch(t){console.error("Error in scheduled options data fetch:",t)}this.scheduleNextFetch()}}getStatus(){const t=this.schedulerActive?this.calculateNextFetchTime():null,a=t?t.getTime()-Date.now():null;return{active:this.schedulerActive,nextFetchTime:t,timeUntilNextFetch:a}}async triggerManualFetch(){console.log("Manual options data fetch triggered via scheduler..."),await D.triggerManualFetch()}};N(R,"instance",null);let H=R;const ye=u.createContext(null);function ht({children:l}){const[t,a]=u.useState({active:!1,nextFetchTime:null,timeUntilNextFetch:null}),[s,r]=u.useState({lastFetch:null,totalContracts:0,dataPoints:0,nextScheduledFetch:new Date}),[o,i]=u.useState(!1),n=H.getInstance();u.useEffect(()=>{const h=()=>{a(n.getStatus())};h();const x=setInterval(h,6e4);return()=>clearInterval(x)},[n]),u.useEffect(()=>{p()},[]);const c=()=>{n.start(),a(n.getStatus())},d=()=>{n.stop(),a(n.getStatus())},m=async()=>{i(!0);try{await n.triggerManualFetch(),await p()}catch(h){console.error("Error triggering manual fetch:",h)}finally{i(!1)}},p=async()=>{try{const h=await D.getDataFetchStats();r(h)}catch(h){console.error("Error refreshing stats:",h)}};return e.jsx(ye.Provider,{value:{schedulerStatus:t,dataStats:s,isLoading:o,startScheduler:c,stopScheduler:d,triggerManualFetch:m,refreshStats:p},children:l})}function $t(){const l=u.useContext(ye);if(!l)throw new Error("useOptionsData must be used within an OptionsDataProvider");return l}const pt=u.lazy(()=>g(()=>import("./Dashboard-23fe28f6.js"),["assets/Dashboard-23fe28f6.js","assets/react-vendor-1447f830.js","assets/communityService-d0b004eb.js","assets/StockChartsWidget-76de4622.js","assets/PageViewCounter-62cfae96.js","assets/ui-vendor-6492ecb9.js","assets/date-utils-41d277e6.js"])),gt=u.lazy(()=>g(()=>import("./AgentDashboard-8569e7b6.js"),["assets/AgentDashboard-8569e7b6.js","assets/react-vendor-1447f830.js","assets/ui-vendor-6492ecb9.js"])),xt=u.lazy(()=>g(()=>import("./Demo-69bc871b.js"),["assets/Demo-69bc871b.js","assets/react-vendor-1447f830.js","assets/ui-vendor-6492ecb9.js"])),ft=u.lazy(()=>g(()=>import("./OptionsPortfolio-169d6557.js"),["assets/OptionsPortfolio-169d6557.js","assets/ui-vendor-6492ecb9.js","assets/react-vendor-1447f830.js","assets/chart-vendor-7391e3e2.js","assets/date-utils-41d277e6.js"])),yt=u.lazy(()=>g(()=>import("./OptionsTrading-ea095556.js"),["assets/OptionsTrading-ea095556.js","assets/react-vendor-1447f830.js","assets/communityService-d0b004eb.js","assets/ui-vendor-6492ecb9.js"])),wt=u.lazy(()=>g(()=>import("./Orders-7031f351.js"),["assets/Orders-7031f351.js","assets/react-vendor-1447f830.js","assets/ui-vendor-6492ecb9.js","assets/date-utils-41d277e6.js"])),bt=u.lazy(()=>g(()=>import("./OptionsChain-258c7ee0.js"),["assets/OptionsChain-258c7ee0.js","assets/react-vendor-1447f830.js","assets/StockChartsWidget-76de4622.js","assets/ui-vendor-6492ecb9.js"])),_t=u.lazy(()=>g(()=>import("./RegimeAnalysis-6da30c81.js"),["assets/RegimeAnalysis-6da30c81.js","assets/react-vendor-1447f830.js","assets/StockChartsWidget-76de4622.js","assets/ui-vendor-6492ecb9.js"])),vt=u.lazy(()=>g(()=>import("./Analytics-5ab260ff.js"),["assets/Analytics-5ab260ff.js","assets/react-vendor-1447f830.js","assets/ui-vendor-6492ecb9.js","assets/chart-vendor-7391e3e2.js","assets/date-utils-41d277e6.js"])),jt=u.lazy(()=>g(()=>import("./OptionsArbitrage-425a0323.js"),["assets/OptionsArbitrage-425a0323.js","assets/react-vendor-1447f830.js","assets/ui-vendor-6492ecb9.js"])),Nt=u.lazy(()=>g(()=>import("./OptionsLearning-b1145204.js"),["assets/OptionsLearning-b1145204.js","assets/react-vendor-1447f830.js","assets/learningService-e71f501e.js","assets/ui-vendor-6492ecb9.js"])),Et=u.lazy(()=>g(()=>import("./TradingJournal-bd0d3ed9.js"),["assets/TradingJournal-bd0d3ed9.js","assets/react-vendor-1447f830.js","assets/learningService-e71f501e.js","assets/ui-vendor-6492ecb9.js","assets/date-utils-41d277e6.js"])),St=u.lazy(()=>g(()=>import("./OptionsStrategies-7058fb8b.js"),["assets/OptionsStrategies-7058fb8b.js","assets/react-vendor-1447f830.js","assets/learningService-e71f501e.js","assets/ui-vendor-6492ecb9.js"])),Dt=u.lazy(()=>g(()=>import("./Community-08d5347f.js"),["assets/Community-08d5347f.js","assets/react-vendor-1447f830.js","assets/communityService-d0b004eb.js","assets/learningService-e71f501e.js","assets/ui-vendor-6492ecb9.js"])),At=u.lazy(()=>g(()=>import("./Settings-bac91673.js"),["assets/Settings-bac91673.js","assets/react-vendor-1447f830.js","assets/PageViewCounter-62cfae96.js","assets/ui-vendor-6492ecb9.js","assets/supabase-a5f1efba.js"])),Pt=u.lazy(()=>g(()=>import("./OptionsDataManager-369224d9.js"),["assets/OptionsDataManager-369224d9.js","assets/ui-vendor-6492ecb9.js","assets/react-vendor-1447f830.js","assets/date-utils-41d277e6.js"])),Tt=u.lazy(()=>g(()=>import("./Construction-cc5c9d00.js"),["assets/Construction-cc5c9d00.js","assets/react-vendor-1447f830.js","assets/ui-vendor-6492ecb9.js"])),kt=()=>e.jsx("div",{className:"flex items-center justify-center h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading..."})]})});function Ct(){return e.jsxs(ut,{children:[e.jsx(Xe,{}),e.jsx(et,{variant:"banner"}),e.jsx(ct,{children:e.jsx(ht,{children:e.jsx(u.Suspense,{fallback:e.jsx(kt,{}),children:e.jsxs(q,{children:[e.jsx(y,{path:"/",element:e.jsx(ot,{})}),e.jsx(y,{path:"/construction",element:e.jsx(Tt,{})}),e.jsx(y,{path:"/demo",element:e.jsx(xt,{})}),e.jsx(y,{path:"/agent",element:e.jsx(gt,{})}),e.jsx(y,{path:"/app",element:e.jsx(X,{children:e.jsx(pt,{})})}),e.jsx(y,{path:"/app/*",element:e.jsx(X,{children:e.jsxs(q,{children:[e.jsx(y,{path:"/portfolio",element:e.jsx(ft,{})}),e.jsx(y,{path:"/trading",element:e.jsx(yt,{})}),e.jsx(y,{path:"/orders",element:e.jsx(wt,{})}),e.jsx(y,{path:"/watchlist",element:e.jsx(bt,{})}),e.jsx(y,{path:"/regime",element:e.jsx(_t,{})}),e.jsx(y,{path:"/arbitrage",element:e.jsx(jt,{})}),e.jsx(y,{path:"/learning",element:e.jsx(Nt,{})}),e.jsx(y,{path:"/journal",element:e.jsx(Et,{})}),e.jsx(y,{path:"/strategies",element:e.jsx(St,{})}),e.jsx(y,{path:"/analytics",element:e.jsx(vt,{})}),e.jsx(y,{path:"/community",element:e.jsx(Dt,{})}),e.jsx(y,{path:"/settings",element:e.jsx(At,{})}),e.jsx(y,{path:"/data-manager",element:e.jsx(Pt,{})})]})})})]})})})})]})}z.createRoot(document.getElementById("root")).render(e.jsx($.StrictMode,{children:e.jsx(Pe,{children:e.jsx(Ct,{})})}));export{S as C,fe as P,pe as S,g as _,Mt as a,$t as b,T as h,e as j,Rt as u};
