import{g as f,r as i,h,j as e,C as g,T as w}from"./index-b5290ce3.js";import{T as k}from"./TradingViewWidget-92093032.js";import{E as S}from"./eye-eac27c97.js";import{T as C}from"./trending-down-bccff4e4.js";function O(){const{state:j}=f(),[l,u]=i.useState([]),[a,p]=i.useState("SPY"),[v,c]=i.useState(!0),[o,N]=i.useState("volume");i.useEffect(()=>{y()},[a]);const y=async()=>{try{c(!0);const s=h.getTopLiquidOptions(),t=a==="ALL"?s:s.filter(n=>n.underlying_ticker===a);u(t)}catch(s){console.error("Failed to load options chain:",s)}finally{c(!1)}},r=s=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(s),m=s=>`${s>=0?"+":""}${(s*100).toFixed(2)}%`,x=[...l].sort((s,t)=>{switch(o){case"volume":return t.volume-s.volume;case"iv":return t.implied_volatility-s.implied_volatility;case"delta":return Math.abs(t.delta)-Math.abs(s.delta);default:return 0}}),b=["ALL",...new Set(h.getTopLiquidOptions().map(s=>s.underlying_ticker))],d={totalContracts:l.length,avgIV:l.length>0?l.reduce((s,t)=>s+t.implied_volatility,0)/l.length:0,totalVolume:l.reduce((s,t)=>s+t.volume,0),totalOI:l.reduce((s,t)=>s+t.open_interest,0)};return v?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"text-lg text-gray-500",children:"Loading options chain..."})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-4 mb-8",children:[e.jsx("div",{className:"card bg-gradient-to-br from-blue-50 to-blue-100 border-blue-200 shadow-md hover:shadow-lg transition-shadow",children:e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(S,{className:"h-10 w-10 text-blue-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 uppercase tracking-wider",children:"Total Contracts"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:d.totalContracts}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Available for trading"})]})]})})}),e.jsx("div",{className:"card bg-gradient-to-br from-green-50 to-green-100 border-green-200 shadow-md hover:shadow-lg transition-shadow",children:e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(g,{className:"h-10 w-10 text-green-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 uppercase tracking-wider",children:"Avg Implied Vol"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:m(d.avgIV)}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Market volatility indicator"})]})]})})}),e.jsx("div",{className:"card bg-gradient-to-br from-purple-50 to-purple-100 border-purple-200 shadow-md hover:shadow-lg transition-shadow",children:e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(w,{className:"h-10 w-10 text-purple-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 uppercase tracking-wider",children:"Total Volume"}),e.jsxs("p",{className:"text-3xl font-bold text-gray-900",children:[(d.totalVolume/1e3).toFixed(0),"K"]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Daily trading activity"})]})]})})}),e.jsx("div",{className:"card bg-gradient-to-br from-orange-50 to-orange-100 border-orange-200 shadow-md hover:shadow-lg transition-shadow",children:e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(C,{className:"h-10 w-10 text-orange-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 uppercase tracking-wider",children:"Open Interest"}),e.jsxs("p",{className:"text-3xl font-bold text-gray-900",children:[(d.totalOI/1e3).toFixed(0),"K"]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Total outstanding contracts"})]})]})})})]}),e.jsxs("div",{className:"card shadow-md border-blue-200",children:[e.jsx("div",{className:"card-header bg-gradient-to-r from-blue-50 to-blue-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Options Chain"}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("select",{className:"form-select",value:a,onChange:s=>p(s.target.value),children:b.map(s=>e.jsx("option",{value:s,children:s},s))}),e.jsxs("select",{className:"form-select",value:o,onChange:s=>N(s.target.value),children:[e.jsx("option",{value:"volume",children:"Sort by Volume"}),e.jsx("option",{value:"iv",children:"Sort by IV"}),e.jsx("option",{value:"delta",children:"Sort by Delta"})]})]})]})}),e.jsx("div",{className:"card-body p-0",children:x.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(g,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No options contracts found"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:a==="ALL"?"No contracts available.":`No contracts found for ${a}.`})]}):e.jsx("div",{className:"overflow-x-auto rounded-b-lg",children:e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Contract"}),e.jsx("th",{children:"Type"}),e.jsx("th",{children:"Underlying"}),e.jsx("th",{children:"Strike"}),e.jsx("th",{children:"Expiry"}),e.jsx("th",{children:"Bid/Ask"}),e.jsx("th",{children:"Last"}),e.jsx("th",{children:"Volume"}),e.jsx("th",{children:"Open Interest"}),e.jsx("th",{children:"Implied Vol"}),e.jsx("th",{children:"Greeks"}),e.jsx("th",{children:"Intrinsic Value"})]})}),e.jsx("tbody",{children:x.map(s=>{const t=j.positions.some(n=>n.contractTicker===s.ticker);return e.jsxs("tr",{className:t?"bg-blue-50 hover:bg-blue-100":"hover:bg-gray-50",children:[e.jsx("td",{children:e.jsx("div",{className:"flex items-center",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:s.ticker}),t&&e.jsx("div",{className:"text-xs text-blue-600 font-medium",children:"POSITION"})]})})}),e.jsx("td",{children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${s.contract_type==="call"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:s.contract_type.toUpperCase()})}),e.jsx("td",{className:"font-medium",children:s.underlying_ticker}),e.jsx("td",{className:"font-medium",children:r(s.strike_price)}),e.jsx("td",{className:"text-sm text-gray-500",children:s.expiration_date}),e.jsx("td",{children:e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{className:"text-red-600",children:r(s.bid)}),e.jsx("div",{className:"text-green-600",children:r(s.ask)})]})}),e.jsx("td",{className:"font-medium bg-gray-50",children:r(s.last)}),e.jsxs("td",{className:"text-sm",children:[(s.volume/1e3).toFixed(1),"K"]}),e.jsxs("td",{className:"text-sm",children:[(s.open_interest/1e3).toFixed(1),"K"]}),e.jsx("td",{className:"font-medium",children:e.jsx("span",{className:"bg-purple-50 px-2 py-1 rounded-md",children:m(s.implied_volatility)})}),e.jsxs("td",{className:"text-xs",children:[e.jsxs("div",{children:["Δ: ",e.jsx("span",{className:s.delta>=0?"text-green-600":"text-red-600",children:s.delta.toFixed(3)})]}),e.jsxs("div",{children:["Γ: ",s.gamma.toFixed(3)]}),e.jsxs("div",{children:["Θ: ",e.jsx("span",{className:"text-red-600",children:s.theta.toFixed(3)})]}),e.jsxs("div",{children:["ν: ",s.vega.toFixed(3)]})]}),e.jsx("td",{children:e.jsxs("div",{className:"text-sm",children:[e.jsxs("div",{children:["Intrinsic: ",r(s.intrinsic_value)]}),e.jsxs("div",{className:"text-gray-500",children:["Time: ",r(s.time_value)]})]})})]},s.ticker)})})]})})})]}),e.jsxs("div",{className:"card shadow-md border-blue-200",children:[e.jsx("div",{className:"card-header bg-gradient-to-r from-blue-50 to-blue-100",children:e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Options Greeks Explained"})}),e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Delta (Δ)"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Measures price sensitivity to underlying asset movement. Range: -1 to +1 for options."})]}),e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Gamma (Γ)"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Rate of change of delta. Higher gamma means delta changes more rapidly."})]}),e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Theta (Θ)"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Time decay. Shows how much option value decreases per day, all else equal."})]}),e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Vega (ν)"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Sensitivity to implied volatility changes. Higher vega means more volatility risk."})]})]})})]}),a&&a!=="ALL"&&e.jsxs("div",{className:"card shadow-md border-blue-200 mb-6",children:[e.jsx("div",{className:"card-header bg-gradient-to-r from-blue-50 to-blue-100",children:e.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:[a," Chart Analysis",e.jsx("a",{href:`https://www.tradingview.com/chart/?symbol=${a}`,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-600 hover:underline ml-2",children:"Open in TradingView"})]})}),e.jsx("div",{className:"card-body",children:e.jsx(k,{symbol:`NASDAQ:${a||"SPY"}`,width:"100%",height:650,interval:"D",theme:"light",studies:["RSI","MACD","Volume"],style:"candles"})})]})]})}export{O as default};
