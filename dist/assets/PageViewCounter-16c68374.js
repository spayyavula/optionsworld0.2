import{r as n,j as e,k as h,i as u}from"./index-98c534f3.js";import{E as w}from"./eye-9d2a129b.js";import{G as j}from"./globe-75d23435.js";const y=()=>{const[r,m]=n.useState({totalViews:0,todayViews:0,countries:{},lastUpdated:new Date}),[x,i]=n.useState(!0);n.useEffect(()=>{(async()=>{try{i(!0);const s=localStorage.getItem("pageViewStats");let t;s?(t=JSON.parse(s),t.lastUpdated=new Date(t.lastUpdated)):t={totalViews:0,todayViews:0,countries:{},lastUpdated:new Date};const g=new Date().toDateString(),p=t.lastUpdated.toDateString();g!==p&&(t.todayViews=0),t.totalViews+=1,t.todayViews+=1,t.lastUpdated=new Date;try{const c=await(await fetch("https://ipapi.co/json/")).json();if(c.country_name){const d=c.country_name;t.countries[d]=(t.countries[d]||0)+1}}catch(l){console.log("Could not determine location:",l),t.countries.Unknown=(t.countries.Unknown||0)+1}localStorage.setItem("pageViewStats",JSON.stringify(t)),m(t)}catch(s){console.error("Error tracking page view:",s)}finally{i(!1)}})()},[]);const o=Object.entries(r.countries).sort((a,s)=>s[1]-a[1]).slice(0,3);return e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(w,{className:"h-5 w-5 mr-2 text-blue-600"}),"Page Views"]}),x?e.jsx("div",{className:"flex items-center justify-center h-24",children:e.jsx("div",{className:"animate-spin h-6 w-6 border-2 border-blue-500 border-t-transparent rounded-full"})}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-blue-50 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center mb-1",children:[e.jsx(h,{className:"h-4 w-4 text-blue-600 mr-2"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Total Views"})]}),e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:r.totalViews.toLocaleString()})]}),e.jsxs("div",{className:"bg-green-50 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center mb-1",children:[e.jsx(u,{className:"h-4 w-4 text-green-600 mr-2"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Today"})]}),e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:r.todayViews.toLocaleString()})]})]}),o.length>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx(j,{className:"h-4 w-4 text-gray-600 mr-2"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Top Locations"})]}),e.jsx("div",{className:"space-y-2",children:o.map(([a,s])=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:a}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:s})]},a))})]}),e.jsxs("div",{className:"text-xs text-gray-500 text-right",children:["Last updated: ",r.lastUpdated.toLocaleString()]})]})]})},v=y;export{v as P};
