import{c as S,r as n,t as v,j as e,y as N,v as w,d,z as F,A as C,D as z,E as $,F as T,Y as I,S as G,w as L,G as R,H as Y}from"./index-b5290ce3.js";import{A as O}from"./arrow-left-269dd5a8.js";const U=S("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]),V=S("ShieldCheck",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",key:"3xmgem"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),M=({plan:i,onSuccess:j,onCancel:m,className:u=""})=>{const[g,f]=n.useState(!1),[p,l]=n.useState(null),[t,y]=n.useState(null),[b,x]=n.useState(!1),c=v.getProducts().find(o=>o.id===i),s=(c==null?void 0:c.price)||0,r=t!=null&&t.isValid?t.finalAmount:s,A=async()=>{x(!0)},P=async()=>{var o;f(!0),l(null);try{const h=(o=t==null?void 0:t.coupon)==null?void 0:o.code;try{const{url:a}=await v.createCheckoutSession(i,h);window.location.href=a}catch(a){console.error("Checkout error details:",a),(a==null?void 0:a.message)==="Stripe checkout error"?l("Invalid payment method"):l(`Failed to initialize checkout: ${a instanceof Error?a.message:"Unknown error"}`),(a==null?void 0:a.message)==="Stripe checkout error"?l("Invalid payment method"):l(`Failed to initialize checkout: ${a instanceof Error?a.message:"Unknown error"}`),l((a==null?void 0:a.message)==="Stripe checkout error"?"Invalid payment method":"Failed to initialize checkout")}}catch(h){console.error("Checkout error:",h),l(`Failed to initialize checkout: ${h instanceof Error?h.message:"Unknown error"}`)}finally{f(!1),x(!1)}},k=()=>{x(!1)},D=o=>{y(o)},E=()=>{y(null)};return e.jsxs("div",{className:`bg-white rounded-lg shadow-md border border-gray-200 p-6 ${u}`,children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:i==="monthly"?"Monthly Plan":"Annual Plan"}),e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsxs("div",{className:"text-3xl font-bold text-gray-900",children:[N(r,"USD").replace("$",""),e.jsxs("span",{className:"text-sm text-gray-500 ml-1",children:["/",i==="monthly"?"month":"year"]})]}),(t==null?void 0:t.isValid)&&e.jsx("div",{className:"ml-3 px-2 py-1 bg-green-100 text-green-800 text-sm rounded-full",children:w.formatDiscount(t.coupon)})]}),(t==null?void 0:t.isValid)&&e.jsxs("div",{className:"text-sm text-gray-500 mb-4",children:[e.jsx("span",{className:"line-through",children:N(s)})," â†’ ",e.jsx("span",{className:"text-green-600 font-medium",children:N(r)})," ",e.jsxs("span",{children:["(",w.formatDiscount(t.coupon),")"]})]}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("div",{className:"flex items-start",children:[e.jsx(d,{className:"h-5 w-5 text-green-500 mt-0.5 mr-2 flex-shrink-0"}),e.jsx("p",{className:"text-gray-700",children:"Full access to all trading features"})]}),e.jsxs("div",{className:"flex items-start",children:[e.jsx(d,{className:"h-5 w-5 text-green-500 mt-0.5 mr-2 flex-shrink-0"}),e.jsx("p",{className:"text-gray-700",children:"Advanced analytics and reporting"})]}),e.jsxs("div",{className:"flex items-start",children:[e.jsx(d,{className:"h-5 w-5 text-green-500 mt-0.5 mr-2 flex-shrink-0"}),e.jsx("p",{className:"text-gray-700",children:"Community integration features"})]}),e.jsxs("div",{className:"flex items-start",children:[e.jsx(d,{className:"h-5 w-5 text-green-500 mt-0.5 mr-2 flex-shrink-0"}),e.jsx("p",{className:"text-gray-700",children:"Priority support"})]})]})]}),e.jsx("div",{className:"mb-6",children:e.jsx(F,{plan:i,originalAmount:s,onCouponApplied:D,onCouponRemoved:E,appliedCoupon:t})}),e.jsx("button",{onClick:A,disabled:g,className:"w-full flex items-center justify-center px-4 py-3 border border-transparent text-base font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:g?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin mr-2 h-4 w-4 border-2 border-white border-t-transparent rounded-full"}),"Processing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(U,{className:"mr-2 h-5 w-5"}),"Proceed to Checkout"]})}),p&&e.jsx("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(C,{className:"h-5 w-5 text-red-500 mr-2"}),e.jsx("p",{className:"text-sm text-red-700",children:p})]})}),e.jsxs("div",{className:"mt-4 flex items-center justify-center text-sm text-gray-500",children:[e.jsx(V,{className:"h-4 w-4 mr-1 text-gray-400"}),e.jsx("span",{children:"Secure payment powered by Stripe"})]}),b&&e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:e.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[e.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:k}),e.jsx("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",children:e.jsx(z,{onAccept:P,onDecline:k})})]})})]})},q=M;function B(){const i=$(),j=T(),[m,u]=n.useState("monthly"),[g,f]=n.useState(!1),[p,l]=n.useState(!1),[t,y]=n.useState(null);n.useEffect(()=>{new URLSearchParams(j.search).get("subscription")==="success"&&(l(!0),window.history.replaceState({},document.title,window.location.pathname)),f(w.hasActiveDeals())},[j]);const b=s=>{y(s),u(s.plan)},x=async s=>{try{const{url:r}=await v.createCheckoutSession(s.plan,s.couponCode);window.location.href=r}catch(r){console.error("Failed to claim deal:",r),alert("Failed to process deal. Please try again.")}},c=Y(m);return e.jsx("div",{className:"min-h-screen bg-gray-50 py-12",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("button",{onClick:()=>i(-1),className:"flex items-center text-blue-600 hover:text-blue-800",children:[e.jsx(O,{className:"h-4 w-4 mr-1"}),"Back"]})}),p&&e.jsxs("div",{className:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative mb-6",role:"alert",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(d,{className:"h-5 w-5 mr-2"}),e.jsx("span",{className:"block sm:inline font-medium",children:"Success!"})]}),e.jsx("span",{className:"block sm:inline ml-7",children:"Thank you for subscribing to Options World! Your account has been activated."})]}),e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Choose Your Subscription Plan"}),e.jsx("p",{className:"text-lg text-gray-600 max-w-3xl mx-auto",children:"Get full access to all features and take your trading skills to the next level"})]}),e.jsx("div",{className:"flex justify-center mb-8",children:e.jsx("div",{className:"inline-flex rounded-md shadow-sm",children:["monthly","yearly"].map(s=>e.jsx("button",{type:"button",onClick:()=>u(s),className:`relative inline-flex items-center px-4 py-2 ${s==="monthly"?"rounded-l-md":"rounded-r-md"} border ${m===s?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,children:s==="monthly"?"Monthly":`Yearly (Save ${I}%)`},s))})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsx("div",{children:e.jsx(q,{plan:m,onSuccess:()=>l(!0)})}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md border border-gray-200 p-6",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-900 mb-6",children:[c.name," Features"]}),e.jsx("div",{className:"space-y-4",children:c.features.map((s,r)=>e.jsxs("div",{className:"flex items-start",children:[e.jsx(d,{className:"h-5 w-5 text-green-500 mt-0.5 mr-3 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:s}),e.jsxs("p",{className:"text-sm text-gray-600",children:[r===0&&"Access all trading features, including options trading, portfolio management, and advanced analytics",r===1&&"Get detailed insights into your trading performance and portfolio allocation",r===2&&"Share trades and insights with the community across multiple platforms",r===3&&"Get help when you need it with our responsive support team",r===4&&"Access exclusive educational content to improve your trading skills",r===5&&"Get personalized assistance from our dedicated team"]})]})]}))}),e.jsx("div",{className:"mt-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(G,{className:"h-5 w-5 text-blue-600 mt-0.5 mr-2 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-blue-800",children:"Satisfaction Guarantee"}),e.jsx("p",{className:"text-sm text-blue-700 mt-1",children:"Not satisfied? Contact us within 14 days for a full refund, no questions asked."})]})]})})]})]}),g&&e.jsxs("div",{className:"mt-12",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsxs("div",{className:"flex items-center justify-center mb-4",children:[e.jsx(L,{className:"h-6 w-6 text-red-500 mr-2"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Special Offers"})]}),e.jsx("p",{className:"text-lg text-gray-600",children:"Limited time deals to help you save on your subscription"})]}),e.jsx(R,{onSelectDeal:b,onClaimDeal:x,selectedPlan:m,className:"max-w-4xl mx-auto"})]}),e.jsx("div",{className:"mt-12 p-4 bg-yellow-50 border border-yellow-200 rounded-lg max-w-4xl mx-auto",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(C,{className:"h-5 w-5 text-yellow-600 mt-0.5 mr-2 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-yellow-800",children:"Important Information"}),e.jsx("p",{className:"text-sm text-yellow-700 mt-1",children:"Options World is for educational purposes only. Our platform is designed to help you learn and develop trading skills, not to provide financial advice. Options trading involves significant risk and requires proper education."})]})]})})]})})}export{B as default};
