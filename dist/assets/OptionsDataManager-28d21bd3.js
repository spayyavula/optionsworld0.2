import{c as N,x as f,j as e,d as u,i as y,k as g,q as p,s as v}from"./index-98c534f3.js";import{D as b}from"./database-0aa10052.js";import{A as w}from"./alert-circle-57fadb88.js";import{f as l}from"./index-f35a43c3.js";import{A as r}from"./activity-52e51503.js";import{R as n}from"./refresh-cw-116841a2.js";import{C as S}from"./calendar-815e6829.js";const C=N("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);function I(){const{schedulerStatus:s,dataStats:a,isLoading:c,startScheduler:m,stopScheduler:x,triggerManualFetch:h,refreshStats:o}=f(),j=t=>{if(!t)return"N/A";const i=Math.floor(t/(1e3*60*60)),d=Math.floor(t%(1e3*60*60)/(1e3*60));return i>0?`${i}h ${d}m`:`${d}m`};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"card",children:e.jsx("div",{className:"card-header",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Options Data Manager"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Automated Polygon.io options data collection and Supabase storage"})]}),e.jsx(b,{className:"h-12 w-12 text-blue-600"})]})})}),e.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-4",children:[e.jsx("div",{className:"card",children:e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:s.active?e.jsx(u,{className:"h-8 w-8 text-green-600"}):e.jsx(w,{className:"h-8 w-8 text-red-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Scheduler Status"}),e.jsx("p",{className:`text-2xl font-bold ${s.active?"text-green-600":"text-red-600"}`,children:s.active?"Active":"Stopped"})]})]})})}),e.jsx("div",{className:"card",children:e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(y,{className:"h-8 w-8 text-blue-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Next Fetch"}),e.jsx("p",{className:"text-lg font-bold text-gray-900",children:j(s.timeUntilNextFetch)}),e.jsx("p",{className:"text-xs text-gray-500",children:s.nextFetchTime?l(s.nextFetchTime,"MMM dd, HH:mm"):"Not scheduled"})]})]})})}),e.jsx("div",{className:"card",children:e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(g,{className:"h-8 w-8 text-purple-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Contracts"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:a.totalContracts})]})]})})}),e.jsx("div",{className:"card",children:e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(r,{className:"h-8 w-8 text-orange-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Data Points"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:a.dataPoints.toLocaleString()})]})]})})})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Scheduler Controls"})}),e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"flex flex-wrap gap-4",children:[e.jsxs("button",{onClick:m,disabled:s.active,className:"btn btn-success",children:[e.jsx(p,{className:"h-4 w-4"}),"Start Scheduler"]}),e.jsxs("button",{onClick:x,disabled:!s.active,className:"btn btn-danger",children:[e.jsx(C,{className:"h-4 w-4"}),"Stop Scheduler"]}),e.jsxs("button",{onClick:h,disabled:c,className:"btn btn-primary",children:[c?e.jsx(n,{className:"h-4 w-4 animate-spin"}):e.jsx(n,{className:"h-4 w-4"}),"Manual Fetch"]}),e.jsxs("button",{onClick:o,className:"btn btn-secondary",children:[e.jsx(r,{className:"h-4 w-4"}),"Refresh Stats"]})]})})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Data Statistics"})}),e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Collection Info"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Last Fetch:"}),e.jsx("span",{className:"font-medium",children:a.lastFetch?l(a.lastFetch,"MMM dd, yyyy HH:mm"):"Never"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Next Scheduled:"}),e.jsx("span",{className:"font-medium",children:l(a.nextScheduledFetch,"MMM dd, yyyy HH:mm")})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Collection Window:"}),e.jsx("span",{className:"font-medium",children:"Last 14 days"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Update Frequency:"}),e.jsx("span",{className:"font-medium",children:"Daily after market close"})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Data Coverage"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Tracked Underlyings:"}),e.jsx("span",{className:"font-medium",children:"SPY, QQQ, AAPL, TSLA, NVDA, MSFT, AMZN, GOOGL"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Contract Types:"}),e.jsx("span",{className:"font-medium",children:"Calls & Puts"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Expiration Range:"}),e.jsx("span",{className:"font-medium",children:"Up to 60 days"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Data Points per Contract:"}),e.jsx("span",{className:"font-medium",children:"14 days × OHLCV + Greeks"})]})]})]})]})})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsxs("h3",{className:"text-lg font-medium text-gray-900 flex items-center",children:[e.jsx(v,{className:"h-5 w-5 mr-2"}),"Configuration"]})}),e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"API Configuration"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Polygon.io API:"}),e.jsx("span",{className:"font-medium text-green-600",children:"Configured"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Real-time Data:"}),e.jsx("span",{className:"font-medium text-yellow-600",children:"Mock Mode"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Rate Limiting:"}),e.jsx("span",{className:"font-medium text-green-600",children:"1 req/sec"})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Storage Configuration"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Database:"}),e.jsx("span",{className:"font-medium text-green-600",children:"Supabase"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Data Persistence:"}),e.jsx("span",{className:"font-medium text-green-600",children:"Enabled"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Retention Period:"}),e.jsxs("span",{className:"font-medium",children:["30"," days"]})]})]})]})]})})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsxs("h3",{className:"text-lg font-medium text-gray-900 flex items-center",children:[e.jsx(S,{className:"h-5 w-5 mr-2"}),"Schedule Information"]})}),e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"Automated Data Collection"}),e.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[e.jsx("li",{children:"• Data collection runs daily at 6:00 PM EST (1 hour after market close)"}),e.jsx("li",{children:"• Collects the last 14 days of options data for tracked underlyings"}),e.jsx("li",{children:"• Includes OHLCV data, Greeks (Delta, Gamma, Theta, Vega), and implied volatility"}),e.jsx("li",{children:"• Automatically skips weekends and holidays"}),e.jsx("li",{children:"• Rate-limited to respect Polygon.io API limits"}),e.jsx("li",{children:"• Falls back to mock data if API is unavailable"})]})]}),e.jsxs("div",{className:"mt-4 bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium text-yellow-900 mb-2",children:"Important Notes"}),e.jsxs("ul",{className:"text-sm text-yellow-800 space-y-1",children:[e.jsx("li",{children:"• Requires valid Polygon.io API key for real data"}),e.jsx("li",{children:"• Supabase configuration needed for persistent storage"}),e.jsx("li",{children:"• Manual fetch available for testing and immediate updates"}),e.jsx("li",{children:"• Scheduler automatically restarts after application reload"})]})]})]})]})]})}export{I as default};
